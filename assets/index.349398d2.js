var ye=Object.defineProperty,we=Object.defineProperties;var ve=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var xe=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable;var Q=(t,e,o)=>e in t?ye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,O=(t,e)=>{for(var o in e||(e={}))xe.call(e,o)&&Q(t,o,e[o]);if(J)for(var o of J(e))ke.call(e,o)&&Q(t,o,e[o]);return t},W=(t,e)=>we(t,ve(e));import{d as j,o as u,c as p,a,n as b,u as r,t as T,w as _,v as H,b as M,e as D,f as q,g as x,k as G,F as A,r as S,h as _e,i as R,j as v,p as Te,l as Ae,M as Me,m as P,I as F,E as te,S as oe,P as se,L as ne,V as ie,q as ae,s as re,x as le,y as $,z as de,A as ce,B as Ce,C as he,N as ue,D as He,G as Ie,H as Se,J as $e,K as X,O as Z,Q as Le,R as Be,T as U,U as fe,W as Ue,X as N,Y,Z as Re,_ as ee,$ as ze,a0 as Ee}from"./vendor.99773f58.js";const De=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function o(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=o(n);fetch(n.href,i)}};De();const Pe={Default:{file:"./terrain_tiles/flat/default-hex.png",selected:!1},badlands:{file:"./terrain_tiles/illustrated/badlands.png",selected:!1},bog:{file:"./terrain_tiles/illustrated/bog.png",selected:!1},grassland:{file:"./terrain_tiles/illustrated/grassland.png",selected:!1},"grassy hills":{file:"./terrain_tiles/illustrated/grassy-hills.png",selected:!1},"deciduous forest":{file:"./terrain_tiles/illustrated/deciduous-forest.png",selected:!1},"deciduous forested hills":{file:"./terrain_tiles/illustrated/deciduous-forested-hills.png",selected:!1},"deciduous forested mountains":{file:"./terrain_tiles/illustrated/deciduous-forested-mountains.png",selected:!1},mountains:{file:"./terrain_tiles/illustrated/mountains.png",selected:!1},"evergreen forest":{file:"./terrain_tiles/illustrated/evergreen-forest.png",selected:!1},"evergreen forested hills":{file:"./terrain_tiles/illustrated/evergreen-forested-hills.png",selected:!1},"evergreen forested mountains":{file:"./terrain_tiles/illustrated/evergreen-forested-mountains.png",selected:!1},marsh:{file:"./terrain_tiles/illustrated/marsh.png",selected:!1},"sandy desert":{file:"./terrain_tiles/illustrated/sandy-desert.png",selected:!1},swamp:{file:"./terrain_tiles/illustrated/swamp.png",selected:!1},water:{file:"./terrain_tiles/illustrated/water.png",selected:!1}},Fe={file:"./terrain_tiles/flat/multiple-hexes.png"},Ve={"abandoned-town":{file:"./flaticon-icons/abandoned-town.png",selected:!1},"abandoned-village":{file:"./flaticon-icons/abandoned-village.png",selected:!1},"ancient-bridge":{file:"./flaticon-icons/ancient-bridge.png",selected:!1},"ancient-library":{file:"./flaticon-icons/ancient-library.png",selected:!1},"awakened-animals":{file:"./flaticon-icons/awakened-animals.png",selected:!1},"bandit-camp":{file:"./flaticon-icons/bandit-camp.png",selected:!1},battlefield:{file:"./flaticon-icons/battlefield.png",selected:!1},"beast-lair":{file:"./flaticon-icons/beast-lair.png",selected:!1},castle:{file:"./flaticon-icons/castle.png",selected:!1},cave:{file:"./flaticon-icons/cave.png",selected:!1},city:{file:"./flaticon-icons/city.png",selected:!1},"collapsed-bridge":{file:"./flaticon-icons/collapsed-bridge.png",selected:!1},"crashed-airship":{file:"./flaticon-icons/crashed-airship.png",selected:!1},crypt:{file:"./flaticon-icons/crypt.png",selected:!1},"cult-sanctum":{file:"./flaticon-icons/cult-sanctum.png",selected:!1},"destroyed-machine":{file:"./flaticon-icons/destroyed-machine.png",selected:!1},"druid-grove":{file:"./flaticon-icons/druid-grove.png",selected:!1},"dryad-grove":{file:"./flaticon-icons/dryad-grove.png",selected:!1},"extraplanar-outpost":{file:"./flaticon-icons/extraplanar-outpost.png",selected:!1},fey:{file:"./flaticon-icons/fey.png",selected:!1},"flying-castle":{file:"./flaticon-icons/flying-castle.png",selected:!1},gallows:{file:"./flaticon-icons/gallows.png",selected:!1},graveyard:{file:"./flaticon-icons/graveyard.png",selected:!1},"haunted-mansion":{file:"./flaticon-icons/haunted-mansion.png",selected:!1},hermitage:{file:"./flaticon-icons/hermitage.png",selected:!1},"hidden-pond":{file:"./flaticon-icons/hidden-pond.png",selected:!1},homestead:{file:"./flaticon-icons/homestead.png",selected:!1},"hot-springs":{file:"./flaticon-icons/hot-springs.png",selected:!1},"hunting-lodge":{file:"./flaticon-icons/hunting-lodge.png",selected:!1},"hunting-preserve":{file:"./flaticon-icons/hunting-preserve.png",selected:!1},inn:{file:"./flaticon-icons/inn.png",selected:!1},"logging-camp":{file:"./flaticon-icons/logging-camp.png",selected:!1},"magic-spring":{file:"./flaticon-icons/magic-spring.png",selected:!1},manor:{file:"./flaticon-icons/manor.png",selected:!1},"military-outpost":{file:"./flaticon-icons/military-outpost.png",selected:!1},mine:{file:"./flaticon-icons/mine.png",selected:!1},monastery:{file:"./flaticon-icons/monastery.png",selected:!1},"monster-lair":{file:"./flaticon-icons/monster-lair.png",selected:!1},"mysterious-archway":{file:"./flaticon-icons/mysterious-archway.png",selected:!1},"mysterious-tower":{file:"./flaticon-icons/mysterious-tower.png",selected:!1},observatory:{file:"./flaticon-icons/observatory.png",selected:!1},"planar-portal":{file:"./flaticon-icons/planar-portal.png",selected:!1},quarry:{file:"./flaticon-icons/quarry.png",selected:!1},"ruined-arena":{file:"./flaticon-icons/ruined-arena.png",selected:!1},"ruined-castle":{file:"./flaticon-icons/ruined-castle.png",selected:!1},"ruined-city":{file:"./flaticon-icons/ruined-city.png",selected:!1},"ruined-temple":{file:"./flaticon-icons/ruined-temple.png",selected:!1},shrine:{file:"./flaticon-icons/shrine.png",selected:!1},"standing-stones":{file:"./flaticon-icons/standing-stones.png",selected:!1},"stargazing-platform":{file:"./flaticon-icons/stargazing-platform.png",selected:!1},statue:{file:"./flaticon-icons/statue.png",selected:!1},"sulfurous-pools":{file:"./flaticon-icons/sulfurous-pools.png",selected:!1},temple:{file:"./flaticon-icons/temple.png",selected:!1},tomb:{file:"./flaticon-icons/tomb.png",selected:!1},"toppled-tower":{file:"./flaticon-icons/toppled-tower.png",selected:!1},town:{file:"./flaticon-icons/town.png",selected:!1},"trading-post":{file:"./flaticon-icons/trading-post.png",selected:!1},village:{file:"./flaticon-icons/village.png",selected:!1},"witches-coven":{file:"./flaticon-icons/witches-coven.png",selected:!1},"wizard-tower":{file:"./flaticon-icons/wizard-tower.png",selected:!1}},Oe={"temperate forest":{odds:{"deciduous forest":1,"evergreen forest":1,"grassy hills":.5,"deciduous forested hills":1,"evergreen forested hills":1,grassland:.5,mountains:.5,"deciduous forested mountains":.5,"evergreen forested mountains":.5,swamp:.25,marsh:.25,bog:.25,water:.1},seeds:{"deciduous forest":1,grassland:1}},hot:{odds:{"sandy desert":1,badlands:1,mountains:.25},seeds:{}}},Ne={"deciduous forest":{primary:["deciduous forest"],secondary:["deciduous forested mountains","deciduous forested hills"],tertiary:[],decrease:[]},"evergreen forest":{primary:["evergreen forest"],secondary:["evergreen forested mountains","evergreen forested hills"],tertiary:[],decrease:[]},"grassy hills":{primary:["grassy hills"],secondary:["grassland","mountains","forested hills"],tertiary:[],decrease:[]},"deciduous forested hills":{primary:["deciduous forested hills"],secondary:["grassy hills","deciduous forested mountains","deciduous forest"],tertiary:[],decrease:[]},"evergreen forested hills":{primary:["evergreen forested hills"],secondary:["grassy hills","evergreen forested mountains","evergreen forest"],tertiary:[],decrease:[]},grassland:{primary:["grassland"],secondary:["grassy hills","savannah"],tertiary:[],decrease:[]},savannah:{primary:["savannah"],secondary:["grassland","grassy hills"],tertiary:[],decrease:[]},mountains:{primary:["mountains"],secondary:["deciduous forested mountains","evergreen forested mountains"],tertiary:[],decrease:[]},"deciduous forested mountains":{primary:["deciduous forested mountains"],secondary:["deciduous forest","deciduous forested hills","mountains"],tertiary:[],decrease:[]},"evergreen forested mountains":{primary:["evergreen forested mountains"],secondary:["evergreen forest","evergreen forested hills","mountains"],tertiary:[],decrease:[]},swamp:{primary:["swamp"],secondary:["marsh","bog","water"],tertiary:[],decrease:["sandy desert","badlands"]},marsh:{primary:["marsh"],secondary:["swamp","bog","water"],tertiary:[],decrease:["sandy desert","badlands"]},bog:{primary:["bog"],secondary:["marsh","swamp","water"],tertiary:[],decrease:["sandy desert","badlands"]},water:{primary:["water"],secondary:["marsh","bog","swamp"],tertiary:[],decrease:["sandy desert","badlands"]},"sandy desert":{primary:["sandy desert"],secondary:["badlands","rocky desert"],tertiary:[],decrease:["water","bog","swamp","marsh"]},badlands:{primary:["badlands"],secondary:["sandy desert","rocky desert","mountains"],tertiary:[],decrease:["water","bog","swamp","marsh"]}},je={sinisterPerson:["dark druid","necromancer","evil wizard","vampire","disguised dragon","shipping magnate"],sacrificialVictim:["virgin","baby","child","noble","two-headed calf","unicorn"],tournamentType:["poetry","sword fighting","archery","riddle-solving","painting"],deity:["!goodDeity","!neutralDeity","!evilDeity"],neutralDeity:["!deityType of Death","!deityType of Fortune"],evilDeity:["!deityType of Murder","!deityType of Storms"],goodDeity:["!deityType of Light","!deityType of Bees","!deityType of Trade","!deityType of Love"],deityType:["God","Goddess"],stone:["granite","sandstone","black stone","obsidian","a strange, irridescent white stone","oily-lookin green stone","ash-gray stone veined with glowing orange light"],gender:["man","woman"],size:["small","medium-sized","large"]},qe={ruin:{"ruined-arena":{names:["ruined arena"],icon:"ruined-arena",odds:1,description:[{text:"An enormous arena built of white stone, slowly crumbling.",odds:1},{text:"A small arena, little more than a broken, circular stone wall.",odds:1}],hook:[{text:"A group of bandits have taken up residence here, and use the arena to test the mettle of anyone foolish enough to enter. Their leader is pretending to be human, but isn\u2019t.",odds:1},{text:"This arena was once the site of bloody gladiatorial games.  It is now said to be cursed, and no one has been able to cleanse it. The priests of @temple would reward anyone who can do it, as they wish to hold a ritual here.",odds:1}]},"destroyed-machine":{names:["destroyed machine","ruined machine"],icon:"destroyed-machine",odds:1,description:[{text:"An enormous machine, broken and smoking in places.",odds:1},{text:"A strange and obviously ruined contraption of metal parts spread across a many-chambered stone hall.",odds:1}],hook:[{text:"This machine was used to open a portal to another world. It is now broken, but if it could be repaired, it might provide a way back home for the adventurers who came through and are now stranded in this world. They can be found at @settlement.",odds:1},{text:"A powerful sorcerer built this machine to try and create a phylactery. It failed, and instead created a powerful undead creature that now stalks the ruins.",odds:1},{text:"This machine was once used to create powerful golems, but was destroyed in a war. The golems still lurk in the ruins, following the last orders they were given.",odds:1}]},"collapsed-bridge":{names:["collapsed bridge"],icon:"collapsed-bridge",odds:1,description:[{text:"Parts of this bridge have collapsed, leaving it dangerous to cross.",odds:1},{text:"A long section of this bridge has collapsed into the chasm it crosses.",odds:1}],hook:[{text:"A young woman is said to have been seen walking on the river beneath the bridge. She is said to grant wishes, but at what cost?",odds:1},{text:"A group of bandits have been using the collapsed bridge as a base to ambush travelers, and the guard of @town:dist=lt3s is stretched too thin to deal with them.",odds:1}]},"toppled-tower":{names:["toppled tower","collapsed tower"],icon:"toppled-tower",odds:1,description:[{text:"The stones of this tower have crumbled, leaving it in pieces.",odds:1},{text:"Shattered remnants of a tower protrude from the earth here, and sections of it lay on their side nearby.",odds:1}],hook:[{text:"A magical artifact is said to be hidden within the ruins of the tower. Many have died trying to find it, but it is said to be worth the risk.",odds:1},{text:"The tower is haunted by the ghosts of those who died when it collapsed. They are seeking revenge on the wizard from @wizard-tower who caused the tower to fall.",odds:1},{text:"A group of bandits have been using the tower as a base of operations. They have been plundering @settlement:dist=lt3s and killing anyone who tries to stop them.",odds:1}]},"ancient-library":{names:["ancient library"],icon:"ancient-library",odds:1,description:[{text:"Abandoned but seemingly in pristine condition, this great library has not so much as dust on the books.",odds:1},{text:"A great stone building, slowly crumbling, its interior filled with a maze of bookshelf-lined corridors.",odds:1}],hook:[{text:"The library is a maze of rooms and corridors, filled with books of all kinds. But some of the books are alive, and they're not happy to be here.  Some will try to bargain passers-by, while others will attack them or try to take control of their bodies through strange and secret arts.",odds:1},{text:"The library is haunted by the ghosts of those who died trying to read its forbidden books. They will try to possess any living creature that steps foot inside, to try and spread their dread knowledge to the outside world.",odds:1},{text:"A magical book in the library has begun to write itself. The quill that writes the words is sentient, and demands sacrifices in return for knowledge.",odds:1},{text:"The library is haunted by the ghosts of the librarians who were executed for heresy. They will only allow someone to leave if they can answer three riddles.",odds:1},{text:"The library was built on the site of a powerful magical creature's death. Its spirit still lurks here, and can be summoned by using its True Name, which can be found in a book within the most dangerous section of the ruins.",odds:1},{text:"The library contains the knowledge of an extinct civilization. A group of scholars that has come here from @city||town hopes to find an adventurer to help them catalogue the tomes, because some of the tomes can be dangerous.",odds:1}]},"ruined-temple":{names:["ruined temple"],icon:"ruined-temple",odds:1,description:[{text:"A terrible fire swept through here in the past, blackening the stone walls.",odds:1},{text:"This temple looks like it was struck by an enormous bolt of lighting - the walls are blasted apart.",odds:1}],hook:[{text:"This temple is said to be haunted by the ghosts of those who died in a great battle that took place here. Some say they can still hear the screams of the dying in the night.  A local wizard is trying to discover the location of a magical artifact that he believes the ghosts know about, but so far, the ghosts have only gotten angrier.",odds:1},{text:"A powerful witch lives in the ruins of this temple, using the power of the ley lines it sits upon for her dark spells.  She is using them against @settlement.",odds:1},{text:"This temple was once dedicated to a forgotten god. It is now a refuge for a group of bandits.",odds:1}]},"haunted-mansion":{names:["haunted mansion"],icon:"haunted-mansion",odds:1,description:[{text:"An imposing mansion draped in decaying luxury.",odds:1}],hook:[{text:"A family moved into the house not knowing it was haunted. They've been having strange experiences and the mother is pregnant. The family is too scared to leave, but they need help.",odds:1},{text:"This house is haunted by the ghost of a man who was wrongfully executed. He's seeking revenge on the family of his accuser, and will haunt anyone who tries to help them.",odds:1},{text:"The house is actually possessed by a demon. It is using the inhabitants to commit terrible acts, and they are slowly being consumed by the demon.",odds:1},{text:"A woman's ghost haunts this house. She's looking for her lost child, and will give a powerful magic item to anyone who can help her find her.",odds:1}]},"mysterious-archway":{names:["mysterious archway","ruined archway"],icon:"mysterious-archway",odds:1,description:[{text:"An enormous stone archway carved with mystic sigils.",odds:1},{text:"A crumbling stone archway.",odds:1}],hook:[{text:"People who step through the archway are turned into stone.",odds:1},{text:"The archway is a portal to another world, and the creatures that come through are wreaking havoc for the nearby settlements.",odds:1}]},tomb:{names:["tomb"],icon:"tomb",odds:1,description:[{text:"A !size tomb carved with motifs of the !deity.",odds:1},{text:"A !size tomb made of dark stone, gargoyles watching from the roof.",odds:1}],hook:[{text:"A demon-summoning ritual went wrong here several hundred years ago.  One can still come here and speak the demon's name to parley with it across the planes.",odds:1},{text:"A treasure is hidden within the sarcophagus in this tomb, but is sealed with a puzzle lock. The ancient dragon lairing nearby knows the secret to opening it, and may trade it for a favor.",odds:1},{text:"A vampire has arisen here after sleeping for millenia.  It seeks its reincarnated lover, who dwells in @settlement.",odds:1}]},statue:{names:["statue"],icon:"statue",odds:1,description:[{text:"Three diminutive people, each bearing a book.",odds:1},{text:"A robed !gender, some twenty feet tall and carved of !stone.",odds:1},{text:"An enormous statue of a !gender bearing arms.",odds:1}],hook:[{text:"The &name is actually a powerful ancient weapon. The wizard of @wizard-tower is trying to find a way to activate it.",odds:1},{text:"This &name hides the secret entrance to a long-dead wizard's lair.",odds:1},{text:"The people of @settlement claim this &name walks the land on nights of the full moon, and that any who challenge it to a wrestling contest and win will be granted a boon.",odds:1}]},"ruined-city":{names:["ruined city"],icon:"ruined-city",odds:1,description:[{text:"A city unmarked by any obvious horrors, yet abandoned.",odds:1},{text:"A city which some terrible calamity befell.  The stones are broken and twisted.",odds:1},{text:"An enormous city, blackened by ancient flames.",odds:1}],hook:[{text:"The whole city was built to channel magical energy for a tremendous ritual that was never carried out.  It could be repurposed.  The wizard of @wizard-tower knows about this.",odds:1},{text:"A dread shapeshifter now lairs amidst the ruins.  It toys with those who enter, luring them into traps and taunting them.  It keeps a treasure horde in the heart of the ruins.",odds:1}]},"ruined-castle":{names:["ruined castle","ruined fortress","ruined keep"],icon:"ruined-castle",odds:1,description:[{text:"The castle looks to still be in good condition, despite its abandonment.",odds:1},{text:"The walls of this ruined castle have crumbled.",odds:1}],hook:[{text:"A group of bandits has been using the ruined castle as a base of operations, and the local lord at @manor||town:dist=lt4s is offering a reward for their capture.",odds:1},{text:"The ruined castle is actually the home of a powerful wizard who has been using it as a laboratory for creating strange and dangerous magical creatures.",odds:1},{text:"A curse lies upon the ruined castle, and anyone who spends the night there is doomed to become a part of the walls.",odds:1},{text:"Humanoids living here are friendly to outsiders, but persecuted by the people of @settlement.",odds:1},{text:"It is said that the magically-infused bones of a powerful, ancient wizard can be found here.",odds:1}]},"mysterious-tower":{names:["ancient tower","ruined tower","mysterious tower"],icon:"mysterious-tower",odds:1,description:[{text:"A tower of living wood.",odds:1},{text:"A tower made of seamless white metal, showing no signs of wear.",odds:1},{text:"An ancient tower of gleaming black stone.",odds:1}],hook:[{text:"The tower has somehow become a portal to another world, and the person who built it is looking for adventurers to explore it.  They have a camp near the tower and can sometimes also be found in @settlement:dist=lt3s.",odds:1},{text:"A necromancer secretly lives in the catacombs under this tower. They have conjured ghosts throughout the tower to guard their lair, and are experimenting with creating ever more terrible undead.",odds:1},{text:"This tower was the site of a recent murder.  A well-known detective needs bodyguards to help him investigate it.",odds:1},{text:"This tower is larger on the inside than the outside, an each floor holds many doors to a different plane. To pass through any door, one must first complete a test the tower gives.",odds:1}]},graveyard:{names:["graveyard"],icon:"graveyard",odds:1,description:[{text:"A well-kept &name, with flowers left on some of the graves.",odds:1},{text:"A &name full of cracked gravestones, as though struck by some terrible catastrophe.",odds:1},{text:"An ancient &name. The headstones here have been worn down by wind and rain and are unreadable.",odds:1}],hook:[{text:"One gravestone here has been defaced. Any who come close to it hear strange whispers, which get louder the closer one gets to it.",odds:1},{text:"It is said that ghosts walk openly here on holy days of the !neutralDeity, and can give advice from beyond the grave to those who are brave or foolish enough.",odds:1},{text:"A vampire hunter has come to @settlement:dist=lt3s claiming there is a vampire in this &name, but the locals there refuse to let them exhume any bodies.",odds:1}]},crypt:{names:["crypt"],icon:"crypt",odds:1,description:[{text:"Tidy, with flowers growing on the grounds above it, maintained by the people of @settlement:dist=lt3s.",odds:1},{text:"An ancient, musty &name.  None visit here, and surrounding settlements tell stories of those foolish enough to come here.",odds:1}],hook:[{text:"Strange noises rise from this &name after dark.",odds:1},{text:"A hidden door here reveals a portal @ruin:dist=gt4s.",odds:1},{text:"Thieves from @town||city are hiding their loot here.",odds:1},{text:"An ancient vampire long sleeping here has begun to stir.",odds:1},{text:"A small group of bandits is hiding from the law here.",odds:1},{text:"Undead have recently been rising from here and terrorizing the surrounding countryside, raised by a necromancer hidden in @ruin.",odds:1}]},"crashed-airship":{names:["crashed airship"],icon:"crashed-airship",odds:1,description:[{text:"The air ship is mostly intact, but shows sign of attack.",odds:1},{text:"Parts of the airship are scattered across a hundred meter area.",odds:1}],hook:[{text:"The airship is actually an enormous and unusually talkative mimic.  It's run out of reading material and will share local secrets with anyone who brings it more.",odds:1},{text:"The airship was carrying a powerful arcane artifact, and its true owner has come from a distant land to find it.",odds:1}]},battlefield:{names:["battlefield"],icon:"battlefield",odds:1,description:[{text:"Nothing grows here.  The land was rendered fallow by terrible magics unleashed in some past battle.",odds:1},{text:"A recent &name. Crows still gather, cawing and picking at bits of rotting flesh.",odds:1},{text:"An ancient &name. Scrub and weeds cover everything, and here and there a rusted weapon can be seen mostly-buried in the dirt.",odds:1}],hook:[{text:"One can pray to the !deityType of Death here and be heard. Priests from @town||city come here once a year to worship - and not all of them return to their temple.",odds:1},{text:"The blood and death that occurred here sometimes animate the weapons into spinning spirits of death.",odds:1},{text:"Any who walk this &name for an hour will see the ghost of one of the leaders of the battle that was fought here, and be tasked with a quest by them which will take them to @ruin:dist=gt4s.",odds:1}]},"ancient-bridge":{names:["ancient bridge"],icon:"ancient-bridge",odds:1,description:[{text:"A bridge decorated with ancient inscriptions.",odds:1},{text:"A stone bridge with troubling cracks running through it.",odds:1}],hook:[{text:"A #monster have been attacking anyone who tries to cross the bridge, and the local lord at @manor:dist=lt3s is offering a hefty reward to anyone who can deal with them.",odds:1},{text:"The bridge is actually a portal to another world, and someone needs to close it before things start coming through.",odds:1},{text:"On solstice nights, this bridge leads to another plane.  A noble from @manor||town||city is planning an expedition there to search for their daughter, who disappeared here at the last solstice.",odds:1},{text:"A troll lives under this bridge and demands that all who pass play a board game with it.",odds:1}],monster:["group of kobolds","troll","band of goblins","pair of wyverns"]},"abandoned-village":{names:["abandoned village"],icon:"abandoned-village",odds:1,description:[{text:"The grounds of this village show signs of a past battle, and you see rusted weapons sticking out of the weeds that have taken over",odds:1},{text:"The surrounding wilderness has been busily reclaiming this village.",odds:1},{text:"This village looks in eerily excellent repair, despite its lack of occupants.",odds:1}],hook:[{text:`This ruin is !size.
It is said that a great treasure is buried somewhere under this village, but the village is now the lair of a powerful monster.`,odds:1},{text:`This ruin is !size.
Many people living in @settlement used to live here, before disaster struck.`,odds:1}]},"abandoned-town":{names:["abandoned town","ruined town"],icon:"abandoned-town",odds:1,description:[{text:"This &name is perfectly preserved, as though its people only left minutes ago. An eerie silence hangs over it.",odds:1},{text:"A terrible fire raged here once, destroying most of the town.",odds:1}],hook:[{text:"A cult now lives among the ruins. They are working to infiltrate the ruling class of @city||town.",odds:1},{text:"The former townsfolk are cursed to never return, but many of them living in @settlement would pay for someone to retrieve treasured belongings. Of course, that someone would have to brave the strange creature said to lurk there now...",odds:1},{text:"A terrible beast now lairs here. The ruler of @city||town would pay well for its head.",odds:1}]}},settlement:{"cult-sanctum":{names:["cult sanctum"],icon:"cult-sanctum",odds:1,description:[{text:"The sanctum is hidden in subterranean chambers beneath the ruins of another building.",odds:1},{text:"A large stone building carved with sinister bas reliefs.",odds:1}],hook:[{text:"The cult is made up of doppelgangers, and is planning to replace key figures in the government of @city||town with their own.",odds:1},{text:"The cultists have been using a magical portal to bring in demons to do their bidding.",odds:1},{text:"A group of adventurers who were hired to investigate the cult have gone missing, and the cultists are acting very strangely.  Their families in @settlement:dist=lt3s want someone to find the adventurers.",odds:1},{text:"A crazed hermit who lives in the woods nearby has been ranting about the 'end times' and saying that the cultists are to blame. He's been attacking them when he can.",odds:1},{text:"The cultists who live in this sanctum have been kidnapping people from @settlement:dist=lt3s for unknown reasons.",odds:1}]},inn:{names:["inn"],icon:"inn",odds:1,description:[{text:"A large and prosperous inn, with a group of musicians performing in the common room.",odds:1},{text:"A small roadside inn, a little run down.",odds:1}],hook:[{text:"A dangerous creature has been stalking people around the inn, and the owner will pay for its demise.",odds:1},{text:"A group of adventurers staying at the inn are planning to rob the nearby tomb at @tomb:dist=lt4s, and the innkeeper is in on it.  The ghosts of the tomb will object strenuously if that happens.",odds:1}]},observatory:{names:["observatory"],icon:"observatory",odds:1,description:[{text:"A great stone dome with a huge telescope pointed up at the sky.",odds:1}],hook:[{text:"The observatory is actually a portal to another world, and the astronomer who went through needs help finding a way back.  He can send messages to people nearby from across the planar boundary, and offers the secret of a great magic in return for help.",odds:1},{text:"A strange creature has been seen in the night sky, and the astronomer wants to get a closer look.",odds:1}]},temple:{names:["temple"],icon:"temple",odds:1,description:[{text:"A huge temple of gleaming white stone.",odds:1},{text:"A small and unostentatious temple.",odds:1}],hook:[{text:"The temple is actually a front for a cult of evil gods, and the priest is looking for adventurers to help them sacrifice a !sacrificialVictim to their dark masters.",odds:1},{text:"A group of bandits has been raiding pilgrims on their way to the temple, and the temple's priest is looking for adventurers to put a stop to it.",odds:1},{text:"A group of acolytes is looking for adventurers to help them cleanse this temple, which has been overrun by fiends.",odds:1}]},"flying-castle":{names:["flying castle"],icon:"flying-castle",odds:1,description:[{text:"A castle of black stone riding a storm cloud, lighting crackling among its towers.",odds:1},{text:"A majestic castle floating among the clouds, its towers gleaming golden.",odds:1}],hook:[{text:"The lord of the castle is holding a !tournamentType tournament. The prize is a wish from a powerful genie.",odds:1},{text:"The lord of the castle is looking for a magical artifact that is rumored to be in @ruin.",odds:1},{text:"The lord of the castle is a powerful sorcerer who is collecting souls for a dread ritual.",odds:1}]},quarry:{names:["quarry"],icon:"quarry",odds:1,description:[{text:"A large quarry, heavy equipment anchored above it.",odds:1},{text:"A small quarry bustling with activity.",odds:1}],hook:[{text:"The quarry workers have been getting sick, and no one knows why. The foreman is offering a reward for anyone who can find a cure.",odds:1},{text:"A magical creature has been seen lurking around the quarry at night, and a wizard living in @settlement:dist=lt3s is offering a reward for its capture.",odds:1},{text:"A group of bandits is holed up in the quarry, and the ruler of @settlement:dist=lt3s wants them dealt with.",odds:1}]},"wizard-tower":{names:["wizard tower"],icon:"wizard-tower",odds:1,description:[{text:"A lonely tower occupied by a cantankerous wizard.",odds:1}],hook:[{text:"The tower is the home of a powerful sorcerer, who is looking for apprentices.",odds:1},{text:"A creation of the wizard has escaped and is harassing the settlement in @settlement.",odds:1},{text:"The wizard has created life!  Life!  But it's gotten out of hand, and needs assistance.",odds:1},{text:"Humanoids lairing in @ruin:dist=lt3s are bothering the wizard, who would like them to be dealt with.",odds:1},{text:"The wizard living here is looking for a rare reagent that can be found in @wilderness.",odds:1}]},village:{names:["village","hamlet","thorp"],icon:"village",odds:1,description:[{text:"This village was clearly founded by people foreign to these lands - the local architecture still looks distinct from any surrounding settlements.",odds:1},{text:"#wealth #attitude",odds:10}],hook:[{text:"The villagers have just found a bounty of a rare resource. The #majorResident of @village has learned about this and is trying to steal it.",odds:1},{text:"Recently several villagers have been killed by a beast lairing in @beast-lair:dist=lt4s, and they've started pooling money to hire a monster hunter to deal with it.",odds:1},{text:"There has been a rash of livestock thefts recently, and the #ruler is willing to pay someone who can make them stop. They were stolen by the #majorResident of @village||town.",odds:1},{text:`The villagers here all wear hats at all times.
The #ruler of this village is having a secret affair with the #majorResident.`,odds:1},{text:`The houses in this village are all painted with flowers.
A #majorResident from this village is looking for their missing son, who was last seen heading toward the ruins at @ruin:dist=lt3s.`,odds:1},{text:"The #ruler of this village is looking for adventurers to steal something from the ruler of @settlement:dist=lt3s.",odds:1}],attitude:["Its people seem cheerful and open to outsiders.","Its people are standoffish, but willing to trade and hear news from the wider world.","Its people seem nervous, and conversations stop whenever #ruler is nearby."],wealth:["This village is quite prosperous. The buildings are in good repair and the people are dressed in clean, well-repaired clothes.","This village is doing fine - about as well as you'd expect from an average village in this region.","This village is just hanging on. There are several abandoned houses, and the people look thin and hungry."],majorResident:["blacksmith","priest","wise woman","elder","innkeeper"],ruler:["headman","council of elders"]},"trading-post":{names:["trading post"],icon:"trading-post",odds:1,description:[{text:"A few wooden buildings with a ragged stone wall surrounding them.",odds:1},{text:"A small trading post surrounded by a wall of sharpened logs.",odds:1}],hook:[{text:"A group of bandits is attacking traders on the road to here, and the owner will reward anyone who brings evidence of their demise.  The bandits' lair is in @bandit-camp.",odds:1},{text:"The owner of the trading post is actually a spy. They'll pay for incriminating information on the ruler of @settlement.",odds:1}]},town:{names:["town"],icon:"town",odds:1,description:[{text:"This is a !size town. #status #recentEvent",odds:1}],hook:[{text:"The #majorResident is secretly a vampire.",odds:1},{text:"The #majorResident of this town pays well for paintings of ducks.  There is an artist in @settlement:dist=lt3s who paints ducks.",odds:1},{text:"The #ruler of this town is organizing a festival, but people from @settlement:dist=lt3s are trying to sabotage it.",odds:1}],recentEvent:["It was recently attacked by an invading force, and still shows the scars of that battle.","It is decorated for an upcoming festival."],status:["It seems less prosperous than it once was - some buildings stand empty, while others are in poor repair.  However, the homes around those of the town ruler are freshly painted.","There's a lot of new construction here.","Half of the town seems to have been abandoned.","It seems to be doing fine, and its people are open to outsiders and trade."],majorResident:["blacksmith","priest","innkeeper","miller","merchant","brewer","doctor","wizard"],ruler:["mayor","ealdorman","town council"]},monastery:{names:["monastery","abbey"],icon:"monastery",odds:1,description:[{text:"A large and ornate monasteries, with fine carvings and inlays of precious metals.",odds:1},{text:"A simple monastery, with plainly-clad monks outside tending the vegetable gardens.",odds:1}],hook:[{text:"One of the monks has disappeared, and the abbot wants someone to find them. The monk was kidnapped by bandits in @bandit-camp, to whom his family owes money.",odds:1},{text:"Someone has murdered the abbot, and the monks need help discovering the truth behind it.",odds:1}]},mine:{names:["mine"],icon:"mine",odds:1,description:[{text:"A fortified structure about an elaborate mining operations, pulling previous materials from the ground.",odds:1},{text:"A deep pit in the earth, with an elevator that lets people descend.",odds:1},{text:"A network of shallow tunnels filled with the sounds of hammers and pickaxes.",odds:1}],hook:[{text:"The mine is run by two fueding clans. The fued has become heated enough that one clan is risking bringing down the mine to get back at the other.",odds:1},{text:"Miners have been disappearing - consumed off by a terrible beast their digging has released.",odds:1}]},"military-outpost":{names:["military outpost"],icon:"military-outpost",odds:1,description:[{text:"A small outpost surrounded by a wall of wooden stakes.",odds:1},{text:"A large and well-fortified outpost.",odds:1}],hook:[{text:"The ruler of @settlement:dist=eq1s is agitating their people against the soldiers here. Things will turn bloody unless someone else steps in.",odds:1},{text:"The outpost commander is loved by their soldiers, but is also cursed to turn into a raven on nights of the new moon.",odds:1},{text:"The outpost commander needs someone to find a missing squad that went to investigate rumors of an attack on @settlement.",odds:1}]},manor:{names:["manor","noble's manor","country manor"],icon:"manor",odds:1,description:[{text:"This manor is made of meat.",odds:.1},{text:"This manor has seen better days.  The outside the weathered and peeling, and the grounds look wild and ill-kept.",odds:1},{text:"A large and beautiful manor house surrounded by well-kept grounds.",odds:1}],hook:[{text:"The noble here would pay a high bounty for the beast lairing in @beast-lair||monster-lair, as that creature killed his cousin.",odds:1},{text:"The noble here is plotting against another noble in @town||city||manor, and needs deniable agents to help frame that noble for a crime.",odds:1},{text:"Twenty years ago the lord here made a deal with a devil - now he desperately needs someone to help disuade the devil from collecting, as the deal comes due soon.",odds:1}]},"logging-camp":{names:["logging camp","loggers' camp"],icon:"logging-camp",odds:1,description:[{text:"A well laid out camp bustling with activity.",odds:1},{text:"A few grubby huts in the wilderness.",odds:1}],hook:[{text:"The loggers have found an entrance to an ancient ruin nearby. One group went inside and has not returned.",odds:1},{text:"Lycanthropy is secretly spreading among the loggers.",odds:1},{text:"The loggers have angered a forest spirit, which is picking them off one by one. They've pooled money as a reward for anyone who deals with it. However, they actually angered it by murdering a favored resident of @settlement:dist=lt3s who had come here to find their brother.",odds:1}]},homestead:{names:["homestead"],icon:"homestead",odds:1,description:[{text:"A large farm house surrounded by bountiful fields and livestock.",odds:1},{text:"A small, lonely homestead.",odds:1}],hook:[{text:"Bandits are threatening the family here with violence if they don't give up most of their harvest. The family will turn to any likely candidates for help.",odds:1},{text:"The family living here is being terrorized by a strange shadow creature. It is after them because the son secretly stole an ancient relic from @ruin.",odds:1}]},"extraplanar-outpost":{names:["extraplanar outpost"],icon:"extraplanar-outpost",odds:1,description:[{text:"Elaborate crystal spires rise up into the sky, glinting with rainbows in the light.",odds:1},{text:"Obsidian cubes rise from burnt ground, with fissures between them spitting out orange light.",odds:1},{text:"A sphere of coppery metal over a hundred feet across.",odds:1}],hook:[{text:"This outpost is the front of an invasion, but the gateway they've come through is unstable and could be disrupted. The wizard in @wizard-tower knows how.",odds:1},{text:"The outpost is trapped on this plane, and the inhabitants can't be away from it long. They need someone to get them a component from @ruin:dist=gt2s so they can return home.",odds:1}]},city:{names:["city"],icon:"city",odds:1,description:[{text:"The city was recently at war with a neighbor, and still shows the scars of that",odds:1},{text:"This city is ruled by the clergy of the !goodDeity. Temple bells can be heard frequently, and it is often decorated to celebrate holy days.",odds:1},{text:"A huge and prosperous city.  Merchants flock here from distant lands to sell their goods.",odds:1}],hook:[{text:"People are being mysteriously and gruesomely murdered by someone the locals have taken to calling the #killerName.",odds:1},{text:"The merchants' guild of @town||city is sabotaging trade here, and the local merchants want someone to deal with it.",odds:1},{text:"The #ruler has been murdered, and one of their functionaries is looking for outside help getting to the bottom of it while matters of succession are being handled.  The murderer is actually an extraplanar assassin conjured by wizards from @town||city.",odds:1}],killerName:["Wolf","Stinky Goblin","White Wind","Abyssal Fang","Blood Baron"],majorResident:["banker","merchant","artist","musician","tailor","blacksmith","goldsmith","silversmith","jeweler","textile merchant","wine merchant","courtier","doctor"],ruler:["mayor","duke","city council"]},castle:{names:["castle","fortress","keep"],icon:"castle",odds:1,description:[{text:"A lonely &name surrounded by &terrain.",odds:1},{text:"The &name is made of black stone. Impaled bodies line the road leading up to the castle.",odds:1},{text:"The walls of this &name show signs of magical attack.",odds:1},{text:"A mighty and imposing &name atop a hill.",odds:1}],hook:[{text:"Humanoids living in the ruins in @ruin:dist=lt3s have been attacking the &name at night.",odds:1},{text:"The #majorResident of this &name is secretly a werewolf.  It is said that the waters of @magic-spring:dist=gt3h can cure such an affliction.",odds:1}],majorResident:["blacksmith","priest","innkeeper","miller","sage","merchant"],ruler:["lord","commander"]},"bandit-camp":{names:["bandit camp"],icon:"bandit-camp",odds:1,description:[{text:"A large and well-guarded camp with numerous bandits.",odds:1},{text:"A small, hidden nest of bandits and their camp followers.",odds:1}],hook:[{text:"The bandits are actually a front for a sinister cult. They are trying to steal a particular artifact being transported to a noble in @town||city||manor to conduct a dark ritual of summoning.",odds:1},{text:"The bandits steal from the rich and give to the poor - but now one of the nobles they stole from has put a bounty on their head. The party can learn about it in @settlement.",odds:1},{text:"The bandits are planning a raid on @village||town:dist=lt3s.",odds:1}]}},wilderness:{"hidden-pond":{names:["hidden pond"],icon:"hidden-pond",odds:1,description:[{text:"A small pond in a hidden valley.",odds:1},{text:"A small pond hidden in a small grove.",odds:1}],hook:[{text:"The hidden pond is home to a great water spirit, and a !sinisterPerson is trying to capture it.",odds:1},{text:"The hidden pond is a place of great power, and a !sinisterPerson is trying to harness that power for evil.",odds:1},{text:"The pond is home to a creature that drags people to the bottom to drown them. The creature is especially active during full moons.  Teenagers from @settlement:dist=lt3s dare each other to visit it.",odds:1},{text:"The pond is the entrance to a hidden underground city, and somebody has been leaving offerings at the entrance.",odds:1}]},gallows:{names:["gallows"],icon:"gallows",odds:1,description:[{text:"A large platform with two posts and a crossbeam, with nooses hanging from the beam.",odds:1},{text:"A single post and crossbeam with a noose hanging from it.",odds:1}],hook:[{text:"The gallows are haunted by the ghost of a witch who was wrongfully executed, and she's looking for somebody to clear her name.",odds:1},{text:"The gallows are cursed, and anybody who steps foot on them will be hanged.  The local government of @settlement:dist=lt5s is looking for someone to lift the curse so they can use the gallows again.",odds:1},{text:"The gallows is said to be haunted by a witch who was hanged here. She offers a potion that will let the drinker see the future, but her price is obscure.",odds:1},{text:"The ghosts of those hanged here still linger, and they're looking for revenge.",odds:1}]},"sulfurous-pools":{names:["sulfurous pools"],icon:"sulfurous-pools",odds:1,description:[{text:"Bubbling pools of sulfurous liquid, smelling like rotten eggs.",odds:1}],hook:[{text:"The pools are home to a water nymph who is looking for a way to escape.  The druids of @druid-grove could help.",odds:1},{text:"The pools are magical and have the power to grant wishes - but they are also deadly.",odds:1},{text:"There is a dragon living in the pools who is looking for a mate.  It\u2019ll pay adventurers handsomely if they can set it up with another dragon. ",odds:1},{text:"The pools are the site of a recent murder, and the killer is still at large.  The guard of @town||city want someone to investigate it.",odds:1},{text:"The pools are home to a creature that emerges at night to feast on anything that it can catch.  It is said that any who catch it are granted a boon.",odds:1},{text:"The pools are said to have magical properties, and the local wizard from @settlement is looking for somebody to test them out.",odds:1}]},"planar-portal":{names:["planar portal"],icon:"planar-portal",odds:1,description:[{text:"A glowing doorway of light.",odds:1},{text:"A great metal ring with a shimmering disc of light within it.",odds:1}],hook:[{text:"The portal is growing larger, and things are starting to come through that shouldn't be able to.",odds:1},{text:"A group of adventurers came through the portal and haven't been seen since. The settlement at @settlement is looking for somebody to go find them.",odds:1},{text:"Curious creatures have begun to come through the portal from the other side, and they're not all friendly.  One group has kidnapped a child from @settlement:dist=lt3s for study, while another has gotten stuck in a nearby well.",odds:1}]},"hunting-preserve":{names:["hunting preserve"],icon:"hunting-preserve",odds:1,description:[{text:"A stretch of land stocked with animals for the local nobility to hunt.",odds:1}],hook:[{text:"The preserve is the site of a murder, and the spirit of the victim is haunting it.  The spirit wants revenge on the killer, who lives in @settlement.",odds:1},{text:"The preserve is the home of a rare and valuable creature, and a nearby !sinisterPerson wants it dead.",odds:1}]},"stargazing-platform":{names:["stargazing platform"],icon:"stargazing-platform",odds:1,description:[{text:"A platform of weathered but ornately carved stone, with a staircase leading to the stop.",odds:1},{text:"A raised platform of weathered wood.",odds:1}],hook:[{text:"A young woman from @settlement:dist=lt3s comes to the platform every night to cry and talk to the stars. She is looking for her lost love, who she believes is now among them.",odds:1},{text:"An astronomer built this platform to study the stars, but went mad when he discovered something out there. He now spends his days muttering to himself up on the platform.",odds:1},{text:"A group of bandits have been using this platform to spot prey on the roads below. The local lord in @manor||town is offering a bounty for their capture.",odds:1},{text:"Every night, a different constellation can be seen from this platform. A group of astronomers from @town||city believe that the constellations are actually a map, and are looking for adventurers to help them follow it.",odds:1}]},"witches-coven":{names:["witches\u2019 coven"],icon:"witches-coven",odds:1,description:[{text:"A circle of dead grass, its perimeter hung with bones and animal carcasses.",odds:1},{text:"A blood-stained clearing.",odds:1}],hook:[{text:"The witches have stolen a baby from @settlement and plan to sacrifice it to the !evilDeity on the next moonless night.  The baby\u2019s brother is out looking for it.",odds:1},{text:"A young woman has been kidnapped and taken here against her will, and the witches intend to transform her into a servitor creature.  Her parents in @settlement will pay anything to have her rescued.",odds:1},{text:"The witches have been cursed, and are slowly turning into animals.",odds:1}]},"hunting-lodge":{names:["hunting lodge"],icon:"hunting-lodge",odds:1,description:[{text:"A comfortable cabin with animal heads mounted on the walls.",odds:1},{text:"A large and well-appointed lodge with a permanent live-in staff.",odds:1}],hook:[{text:"A witch has cursed the lodge, and the owner - the noble of @manor - will pay handsomely for anyone who can break the curse.",odds:1},{text:"The lodge is actually a front for a group of werewolf hunters. They're always looking for new recruits.",odds:1},{text:"The lodge is being haunted by the ghost of a hunter who died in these woods. He's looking for revenge.",odds:1}]},"standing-stones":{names:["standing stones"],icon:"standing-stones",odds:1,description:[{text:"Great stone monoliths arranged in a #shape.",odds:1}],hook:[{text:"On nights with a full moon, the stones speak prophecies.",odds:1},{text:"A group of militant druids resides here and is plotting against @settlement.",odds:1},{text:"Long ago, wizards from @ruin sealed a terrible evil below these stones.",odds:1}],shape:["circle","crescent","pentagon"]},shrine:{names:["shrine"],icon:"shrine",odds:1,description:[{text:"A six-pillared stone building housing a statue of the !goodDeity and a small altar.",odds:1},{text:"A small shrine with a crudely-carved wooden statue of the !goodDeity. Someone has recently left an offering of #offering here.",odds:1}],hook:[{text:"The deity worshipped here is said to manifest to worshippers on holy days.",odds:1},{text:"A terrible murder was recently committed here - perpetrated by the druids of @druid-grove in a plot to deconsecrate this shrine.",odds:1}],offering:["food","a few copper coins","bread and milk","an animal's heart","a skin of wine"]},"monster-lair":{names:["monster lair"],icon:"monster-lair",odds:1,description:[{text:"A place filled with a terrible, fetid stench.",odds:1},{text:"A terrible, barren place strewn with skulls.",odds:1}],hook:[{text:"A young woman from @settlement:dist=lt3s has been kidnapped by the monsters and is being held captive in their lair. Her family is willing to pay a ransom for her safe return.",odds:1},{text:"The monsters here have been bothering the people of @settlement:dist=lt3s, and the mayor is offering a reward for their heads.",odds:1}]},"magic-spring":{names:["magic spring"],icon:"magic-spring",odds:1,description:[{text:"A pool of faintly glowing water.",odds:1},{text:"A spring bubbling from the earth, surrounded by bountiful vegetation",odds:1}],hook:[{text:"There is a hive of talking bees.",odds:1},{text:"The spring turns local animals into dire beasts.",odds:1},{text:"The elite of @town believe the spring's waters prevent aging, but the reality is something sinister.",odds:1}]},"hot-springs":{names:["hot springs"],icon:"hot-springs",odds:1,description:[{text:"Steaming hot springs.",odds:1}],hook:[{text:"The hot springs have real rejuvenative properties for those who soak in them.",odds:1},{text:"The monkeys who frequent these hot springs can talk, and have the gift of far-sight. They enjoy offerings of precious spices.",odds:1}]},hermitage:{names:["hermitage","hermit's hut"],icon:"hermitage",odds:1,description:[{text:"A small but well-built hut. Chickens peck at the dirt in a fenced yard outside.",odds:1},{text:"A small, crude hut.",odds:1}],hook:[{text:"The hermit is actually the former ruler of @town||city, driven out by a conspiracy. They'll try to get the party to help them return to their former post.",odds:1},{text:"The hermit speaks prophecies to those who treat them kindly.",odds:1}]},fey:{names:["fey"],icon:"fey",odds:1,description:[{text:"The magical hunting camp of a fey lord.",odds:1},{text:"A fey palace, shimmering with rainbow colors.",odds:1}],hook:[{text:"A trickster fey living here is tormenting the people of @settlement, and those people are willing to pay to have someone force the fey to stop.",odds:1},{text:"The ruler of this place has fallen in love with a human, but that human has disappeared - kidnapped by a cult operating in @settlement to try and get leverage against the fey noble in the future. The noble will pay handsomely in fey magics for the human's safe return.",odds:1}]},"dryad-grove":{names:["dryad grove"],icon:"dryad-grove",odds:1,description:[{text:"A grove of tall cedars.",odds:1},{text:"A grove of majestic oaks.",odds:1},{text:"A grove of beautiful birch trees.",odds:1}],hook:[{text:"The dryad is trying to start a band to compete in the yearly band contest in @city.  Winners are granted a wish by the city's resident genie.",odds:1},{text:"The dryad is incredibly bored.  She'll try and get passersby to stay for a time, or failing that, to bring new reading material.  She has a substantial library in her hidden home in the trees.",odds:1}]},"druid-grove":{names:["druid grove"],icon:"druid-grove",odds:1,description:[{text:"A circle of red flowers ringed by birch trees, their branches hung with bone ornaments.",odds:1},{text:"A ring of trees surrounding an ancient and enormous oak.",odds:1}],hook:[{text:"A gathering here is approaching to choose the next High Druid.  A necromancer lairing in @ruin is trying to set a trap for the druids.",odds:1},{text:"The druids here are engaged in a deadly conflict with the people of @settlement:dist=lt3s.",odds:1}]},cave:{names:["cave","cavern"],icon:"cave",odds:1,description:[{text:"A deep cave in a hillside.",odds:1}],hook:[{text:"A bandit of old hid their treasure inside the cave - and guarded it with a curse.",odds:1},{text:"Strange albino creatures lurk in the cave and speak prophecies.",odds:1},{text:"The people of @village:dist=lt3s claim there is a bird nesting near this cave that lays golden eggs - but that a terrible beast lairs inside the cave itself.",odds:1}]},"beast-lair":{names:["beast lair"],icon:"beast-lair",odds:1,description:[{text:"A forest glade dotted with large tunnels.",odds:1},{text:"A blood-soaked clearing.",odds:1},{text:"A musky-smelling cave, littered with bones.",odds:1}],hook:[{text:"The beast is calling others of its kind to the area.",odds:1},{text:"The beast has recently eaten a noble from @town, and the noble's signet ring is now in the beast's stomach.",odds:1}]},"awakened-animals":{names:["awakened animals"],icon:"awakened-animals",odds:1,description:[{text:"",odds:1}],hook:[{text:`A pack of awakened wolves living in a large cave.
They watch over a group of abandoned children they have gradually picked up, of varying ages. The wolves worry about how they will be able to send the older children to school soon.`,odds:1},{text:`A group of awakened squirrels has built a miniature town in a large oak tree.
Recently a faerie has stolen their lucky acorn, and the squirrels want it back. They know a secret about treasure in @ruin:dist=lt3s which they can trade for it.`,odds:1}]}}};var I={terrainToImage:Pe,multiple_hexes:Fe,icons:Ve,terrainProperties:Oe,terrainInfluencedBy:Ne,globalFillLists:je,contentTags:qe};const w=j({id:"hexes",state:()=>({hexes:[[{uuid:1,id:"1-1",row:1,column:1,terrain:"Default",icon:null,content:null,tags:[],startingTags:[],referenceMirrors:[],mentionTagHovered:!1}]],defaultHexProperties:{terrain:"Default",icon:null,selected:!1},sampleLocations:["Ruin","Town","Village"],selectedSampleLocations:[],uuid:1,columnsAddedRight:0,columnsAddedLeft:0,nthChildShift:83.5,leftmostColumn:"odd",terrainProperties:I.terrainProperties,terrainInfluencedBy:I.terrainInfluencedBy,primaryMapOne:{0:0,1:7,2:10,3:13,4:15,5:17,6:19},primaryMapTwo:{0:0,1:1,2:2.5,3:4,4:5,5:6,6:7,7:7.5,8:8,9:9,10:9.5,11:10,12:11},secondaryMapOne:{0:0,1:2,2:4,3:6,4:7,5:8,6:9},secondaryMapTwo:{0:0,1:.5,2:1,3:2,4:2.5,5:3,6:4,7:4.5,8:5,9:6,10:6.5,11:7,12:7.5},tertiaryMapOne:{0:0,1:1,2:2,3:3,4:3.5,5:4,6:4.5},tertiaryMapTwo:{0:0,1:1/3,2:2/3,3:1,4:4/3,5:5/3,6:2,7:7/3,8:8/3,9:3,10:3,11:3.5,12:3.5},contentTags:{settlement:I.contentTags.settlement,ruin:I.contentTags.ruin,wilderness:I.contentTags.wilderness},globalFillLists:I.globalFillLists,pointOfInterest:{type:["settlement","ruin","wilderness"],odds:[1,1,1]}}),getters:{countLines:t=>t.hexes.length,allLinesEqual:t=>{var e=t.hexes[0].length,o=t.hexes[0].length;return t.hexes.forEach(s=>{s.length<e?e=s.length:s.length>o&&(o=s.length)}),e==o},countColumns:t=>{var e=0;return t.hexes.forEach(o=>{o[o.length-1].column>e&&(e=o[o.length-1].column)}),e},activeHex:t=>e=>t.hexes.flat().find(o=>o.id==e),hexByUUID:t=>e=>t.hexes.flat().find(o=>o.uuid==e),hexByPosition:t=>(e,o)=>{var s=null,n=null;return t.leftmostColumn=="odd"?o%2==0?s=e*2-1:s=e*2-2:o%2==0?s=e*2-2:s=e*2-1,o%2==0?n=o/2-1:n=Math.floor(o/2),t.hexes[s][n]},getShiftPixels:t=>t.nthChildShift.toString().concat("px"),getShiftValue:t=>t.nthChildShift,tagList:t=>{var e=Object.keys(t.contentTags);return Object.keys(t.contentTags).forEach(o=>{e=e.concat(Object.keys(t.contentTags[o]))}),e},unifyContentsAsync:t=>{m();var e={type:"doc",content:[]},o=t.hexes.flat().filter(n=>n.content!=null&&n.content.content.length>0).length;const s=t.hexes.flat().filter(n=>n.content!=null&&n.content.content.length>0).sort(t.sortHexesComparison);return t.asyncForHexes(s,o,e,t.unifyHexProcessing),e},unifyContents:t=>{performance.now();const e=m();var o={type:"doc",content:[]},s=0,n=t.hexes.flat().filter(i=>i.content!=null&&i.content.content.length>0).length;return t.hexes.flat().filter(i=>i.content!=null&&i.content.content.length>0).sort(t.sortHexesComparison).forEach(i=>{o.content.push({type:"paragraph",content:[{type:"horizontalRule"}]}),o.content.push({type:"paragraph",content:[{type:"hex-image",attrs:{src:e.terrainToImage[i.terrain].file,style:"width:46px; padding-right: 10px"}},{type:"text",text:i.id,marks:[{type:"headingH1",attrs:{id:i.uuid}}]}]});var l=[{type:"text",text:"Mentioned by: "}],d=0;t.mentionedByHexes(i.uuid).forEach(c=>{d>0&&l.push({type:"text",text:", "}),l.push({type:"mention",attrs:{uuid:c.uuid}}),d+=1}),l.length>1&&o.content.push({type:"paragraph",content:l}),i.content.content.forEach(c=>{o.content.push(c)}),o.content.push({type:"paragraph",content:[{type:"text",text:"Back to top",marks:[{type:"link",attrs:{href:"#hex-container-view",target:"_self"}}]}]}),s+=1,e.viewModeProgress=s/n}),performance.now(),o}},actions:{addHex(t,e,o){t>this.countLines+1&&(t=this.countLines+1),t>this.countLines&&this.hexes.push([]);var s=null;e=="left"?s=1:e=="right"&&(s=this.hexes[t-1].length+1);const n=Math.ceil(t/2),i=s*2-t%2,l=n.toString().concat("-",i.toString());var d={uuid:this.setUUID(),id:l,row:n,column:i,terrain:o.terrain,icon:o.icon,content:null,selected:!1,tags:[],startingTags:[],mentionTagHovered:!1};e=="right"?this.hexes[t-1].push(d):e=="left"&&this.hexes[t-1].unshift(d)},makeHexForTesting(t){this.addHex(t,"right",this.defaultHexProperties)},makeHexForTestingLeft(t){this.addHex(t,"left",this.defaultHexProperties)},addRow(t,e,o){if(e==null&&(e=this.countColumns),t=="bottom"){if(this.leftmostColumn=="odd")var s=this.countLines+1;else var s=this.countLines+2;this.hexes.push([]),this.hexes.push([])}else{if(this.leftmostColumn=="odd")var s=1;else var s=2;this.hexes.unshift([]),this.hexes.unshift([]),this.shiftHexNumbers()}var n=this.leftmostColumn,i=this.leftmostColumn;for(let l=0;l<e;l++)this.addHex(s,"right",o),i=="odd"?n=="odd"?(n="even",s++):(n="odd",s=s-1):n=="even"?(n="odd",s=s-1):(n="even",s++)},addColumn(t,e){t=="right"?(this.columnsAddedRight%2==0?this.hexes.forEach((o,s)=>{s%2!=0&&this.addHex(s+1,t,e)}):this.hexes.forEach((o,s)=>{s%2==0&&this.addHex(s+1,t,e)}),this.columnsAddedRight++):(this.hexes.forEach((o,s)=>{this.nthChildShift>0?s%2!=0&&this.addHex(s+1,t,e):s%2==0&&this.addHex(s+1,t,e)}),this.nthChildShift=-1*this.nthChildShift,this.shiftHexNumbers())},oddToNegative(t){return t%2==0?1:-1},fillFirstRow(t,e){var o=2,s="even";for(let n=1;n<t;n++)this.addHex(o,"right",e),s=="odd"?(s="even",o++):(s="odd",o--)},initializeHexGrid(t,e){const o=m();this.fillFirstRow(e,this.defaultHexProperties);for(let s=1;s<t;s++)this.addRow("bottom",e,this.defaultHexProperties);this.columnsAddedRight=e-1,o.closeInitializeMapModal()},initializeMapForTesting(){this.initializeHexGrid(8,8)},removeHex(t){const o=this.activeHex(t);this.hexes[o.row-1].splice(o.column-1)},setHexTerrain(t,e,o){t.terrain=e,e!="Default"&&o&&this.maintainEmptyMapEdge(t.row,t.column)},paintHexTerrain(t,e){const o=m();t.terrain=e,o.paintedHexes.push(t)},terrainPainterMapUpdate(){const t=m();if(t.paintedHexes.length>0){var e=!1,o=!1,s=!1,n=!1;t.paintedHexes.forEach(i=>{i.row==1?e=!0:i.row==this.countLines/2&&(o=!0),i.column==1?s=!0:i.column==this.countColumns&&(n=!0)}),e&&this.maintainEmptyMapEdge(1,999),o&&this.maintainEmptyMapEdge(this.countLines/2,999),s&&this.maintainEmptyMapEdge(999,1),n&&this.maintainEmptyMapEdge(999,this.countColumns),t.paintedHexes=[]}},setHexIcon(t,e){t.icon=e},shiftHexNumbers(){this.hexes.forEach((t,e)=>{t.forEach((o,s)=>{o.row=Math.ceil((e+1)/2),this.leftmostColumn=="odd"?o.column=(s+1)*2-(e+1)%2:o.column=(s+1)*2-e%2,o.id=o.row.toString().concat("-",o.column.toString())})})},setUUID(){return this.uuid++,this.uuid},logHexes(){console.log(this.hexes)},checkEmptyEdge(){},maintainEmptyMapEdge(t,e){m(),t==1?this.addRow("top",this.countColumns,this.defaultHexProperties):t==this.countLines/2&&this.addRow("bottom",this.countColumns,this.defaultHexProperties),e==1?(this.addColumn("left",this.defaultHexProperties),this.toggleLeftmostColumn()):e==this.countColumns&&this.addColumn("right",this.defaultHexProperties),this.shiftHexNumbers()},toggleLeftmostColumn(){this.leftmostColumn=="odd"?this.leftmostColumn="even":this.leftmostColumn="odd"},terrainWithinTwo(t){var e={};const s=this.hexByUUID(t);var n=null,i=null;s.row%2==0?(n=[{row:-1,column:0},{row:1,column:0},{row:0,column:1},{row:1,column:1},{row:0,column:-1},{row:1,column:-1}],i=[{row:-2,column:0},{row:2,column:0},{row:-1,column:1},{row:2,column:1},{row:-1,column:2},{row:0,column:2},{row:1,column:2},{row:2,column:-1},{row:-1,column:-1},{row:-1,column:-2},{row:0,column:-2},{row:1,column:-2}]):(n=[{row:-1,column:0},{row:1,column:0},{row:-1,column:1},{row:0,column:1},{row:-1,column:-1},{row:0,column:-1}],i=[{row:-2,column:0},{row:2,column:0},{row:-2,column:1},{row:1,column:1},{row:-1,column:2},{row:0,column:2},{row:1,column:2},{row:-2,column:-1},{row:1,column:-1},{row:-1,column:-2},{row:0,column:-2},{row:1,column:-2}]);const l=this.hexByPosition;return n.forEach(d=>{if(s.row+d.row>=1&&s.column+d.column>=1&&s.row+d.row<=this.hexes.length/2&&s.column+d.column<=this.countColumns){const c=l(s.row+d.row,s.column+d.column).terrain;Object.keys(e).includes(c)?e[c]["one-away"]++:e[c]={"one-away":1,"two-away":0}}}),i.forEach(d=>{if(s.row+d.row>=1&&s.column+d.column>=1&&s.row+d.row<=this.hexes.length/2&&s.column+d.column<=this.countColumns){const c=l(s.row+d.row,s.column+d.column).terrain;Object.keys(e).includes(c)?e[c]["two-away"]++:e[c]={"one-away":0,"two-away":1}}}),e},fillMap(t,e,o){const s=this.terrainProperties[t];this.seedTerrain(s.seeds,e,o),this.hexes.forEach(n=>{n.forEach(i=>{this.generateTerrain(i,s.odds,!1)})}),this.hexes.forEach(n=>{n.forEach(i=>{this.generateHexContents(i,"none")})}),this.addRow("top",this.countColumns,this.defaultHexProperties),this.addRow("bottom",this.countColumns,this.defaultHexProperties),this.addColumn("right",this.defaultHexProperties),this.addColumn("left",this.defaultHexProperties),this.toggleLeftmostColumn(),this.shiftHexNumbers()},seedTerrain(t,e,o){return null},generateTerrain(t,e,o){const s=this.terrainWithinTwo(t.uuid);var n=[],i=[];Object.keys(e).forEach(d=>{var c=e[d];Object.keys(s).forEach(h=>{this.terrainInfluencedBy[d].primary.includes(h)?c=c+this.primaryMapOne[s[h]["one-away"]]+this.primaryMapOne[s[h]["two-away"]]:this.terrainInfluencedBy[d].secondary.includes(h)?c=c+this.secondaryMapOne[s[h]["one-away"]]+this.secondaryMapOne[s[h]["two-away"]]:this.terrainInfluencedBy[d].tertiary.includes(h)&&(c=c+this.tertiaryMapOne[s[h]["one-away"]]+this.tertiaryMapOne[s[h]["two-away"]])}),n.push(d),i.push(c)});const l=this.weightedRandom(n,i);this.setHexTerrain(t,l,o)},generateHexContents(t,e){const o=m();var s=!0;if(t.tags.length==0&&(s=!1),t.tags=this.generateHexTags(t,o.baseFractionWithContent,e),!s||e=="full"||e=="description"){const l=this.generateHexDescription(t,{mention:"any"});var n=[];const d={type:"doc",content:[]};t.content=this.formatDescriptionForTiptap(t,d,l,n);var i=null;t.tags.forEach(c=>{Object.keys(this.contentTags).includes(c)||(i=this.contentTags[this.parentTypeTag(c)][c].icon)}),this.setHexIcon(t,i),n.forEach(c=>{const f=this.hexByUUID(c.uuid);this.resolveHexTagUpdate(f,c.tag)})}},generateHexTags(t,e,o){return o=="full"&&(t.tags=[]),t.tags.length==0?o=="full"||o=="description"?this.generateHexTag(t.terrain):Math.random()>e?t.tags:this.generateHexTag(t.terrain):this.refineTags(t.tags)},refineTags(t){return t.filter(o=>Object.keys(this.contentTags).includes(o)&&t.filter(s=>Object.keys(this.contentTags[o]).includes(s)).length==0).forEach(o=>{t=this.refineTag(o,t)}),t},generateHexTag(t){const e=this.weightedRandom(this.pointOfInterest.type,this.pointOfInterest.odds);return this.refineTag(e,[e])},refineTag(t,e){if(Object.keys(this.contentTags).includes(t)){var o=Object.keys(this.contentTags[t]),s=[];return o.forEach(n=>{s.push(this.contentTags[t][n].odds)}),e.push(this.weightedRandom(o,s)),e}else return e},generateHexDescription(t,e){var o=[];const s=new RegExp("@[-a-zA-Z0-9:|=]+","g");return t.tags.forEach(n=>{if(!Object.keys(this.contentTags).includes(n)){const h=this.parentTypeTag(n);if(h!=null){var i=[],l=[],d=this.contentTags[h][n];Object.keys(d).forEach(f=>{if(d[f][0]=="ref"){const g=d[f][1].split(":");d[f]=this.contentTags[g[0]][g[1]][f]}});var c="";d.description.forEach(f=>{(e.mention=="any"||e.mention=="no"&&!s.test(f.text))&&(i.push(f.text),l.push(f.odds))}),c=c+this.weightedRandom(i,l),i=[],l=[],d.hook.forEach(f=>{(e.mention=="any"||e.mention=="no"&&!s.test(f.text))&&(i.push(f.text),l.push(f.odds))}),c=c+`
`+this.weightedRandom(i,l),o.push({tag:n,type:h,text:c})}}}),o},parentTypeTag(t){var e=null;return Object.keys(this.contentTags).forEach(o=>{Object.keys(this.contentTags[o]).includes(t)&&(e=o)}),e},resolveNameAndTerrain(t,e){const o=new RegExp("&name","g"),s=new RegExp("&terrain","g"),n=this.randomChoice(this.contentTags[t.type][t.tag].names);return t.text=t.text.replace(o,n),t.text=t.text.replace(s,e),{element:t,name:n}},resolveContentChoices(t){const e=new RegExp("[#!][a-zA-Z0-9|]+");var o=t.text;const s=o.match(e);return s!=null?(s.forEach(n=>{const i=n.split("||"),l=i[0].substring(0,1);i[0]=i[0].substring(1);const d=this.randomChoice(i);l=="#"?o=o.replace(e,this.randomChoice(this.contentTags[t.type][t.tag][d])):l=="!"&&(o=o.replace(e,this.randomChoice(this.globalFillLists[d])))}),t.text=o,this.resolveContentChoices(t)):o},resolveLineBreaks(t){if(new RegExp("\\n","g").test(t)){var o=[],s=t.split(/\n/);for(let n=0;n<s.length;n++)s[n]!=""&&o.push({type:"text",content:s[n]}),n<s.length-1&&o.push({type:"break",content:`
`});return o}else return[{type:"text",content:t}]},resolveContentMentions(t,e,o){var s=[];const n=new RegExp("@[-a-zA-Z0-9|:=]+","g");return e.forEach(i=>{const l=i.content.match(n);if(l==null)s.push(i);else{var d=i.content.split(/@[-a-zA-Z0-9|:=]+/),c=[];l.forEach(h=>{var f=h.split(":");const g=f[0].split("||");g[0]=g[0].substring(1);var y=f.slice(1);const B=new RegExp("([a-z]+)([0-9]+)([a-z]+)");for(let z=0;z<y.length;z++){const E=y[z].match(B);E!=null&&(y[z]={condition:E[1],distanceBound:E[2],conditionType:E[3]})}const k={tag:this.randomChoice(g),constraints:y},C=this.getMatchingHex(k,t);c.push(C.uuid),C.type!="existing"&&o.push({tag:k.tag,uuid:C.uuid})});for(let h=0;h<d.length;h++)d[h]!=""&&s.push({type:"text",content:d[h]}),h<d.length-1&&s.push({type:"mention",content:c[h]})}}),s},setTiptapNodes(t,e,o,s){t.content.push({type:"paragraph",content:[{type:"text",text:this.toTitleCase(s),marks:[{type:"bold"}]}]});var n={type:"paragraph",content:[]};return e.forEach(i=>{i.type=="break"?(n.content.length>0&&(t.content.push(n),n={type:"paragraph",content:[]}),t.content.push({type:"paragraph"})):i.type=="text"?n.content.push({type:"text",text:i.content}):i.type=="mention"&&n.content.push({type:"mention",attrs:{uuid:i.content}})}),n.content.length>0&&t.content.push(n),t},addLineBreak(t){return t.content.push({type:"paragraph"}),t},formatDescriptionForTiptap(t,e,o,s){var n=e;for(let h=0;h<o.length;h++){var i=o[h],l=this.resolveNameAndTerrain(i,t.terrain),d=this.resolveContentChoices(l.element),c=this.resolveLineBreaks(d);c=this.resolveContentMentions(t,c,s),n=this.setTiptapNodes(n,c,i.tag,l.name),h<o.length-1&&(n=this.addLineBreak(n))}return n},resolveMatchingHexConstraints(t,e,o){return t.length==0?"preferred":this.checkHexDistanceConstraint(t,e,o)},checkHexDistanceConstraint(t,e,o){const s=this.hexToHexDistance(e,o);for(let n=0;n<t.length;n++){if(t[n].condition=="lt")return t[n].conditionType=="s"?s<t[n].distanceBound?"preferred":"accepted":s<t[n].distanceBound?"preferred":"invalid";if(t[n].condition=="lte")return t[n].conditionType=="s"?s<=t[n].distanceBound?"preferred":"accepted":s<=t[n].distanceBound?"preferred":"invalid";if(t[n].condition=="gt")return t[n].conditionType=="s"?s>t[n].distanceBound?"preferred":"accepted":s>t[n].distanceBound?"preferred":"invalid";if(t[n].condition=="gte")return t[n].conditionType=="s"?s>=t[n].distanceBound?"preferred":"accepted":s>=t[n].distanceBound?"preferred":"invalid";if(t[n].condition=="eq")return t[n].conditionType=="s"?s==t[n].distanceBound?"preferred":"accepted":s==t[n].distanceBound?"preferred":"invalid"}},getMatchingHex(t,e){const o=t.tag;var s={preferred:[],accepted:[]},n={preferred:[],accepted:[]},i={preferred:[],accepted:[]};const l=this.hexes.flat();if(performance.now(),l.forEach(d=>{if(d.terrain!="Default")if(d.tags.length==0&&d.uuid!=e.uuid){const c=this.resolveMatchingHexConstraints(t.constraints,e,d);c=="preferred"?n.preferred.push(d.uuid):c=="accepted"&&n.accepted.push(d.uuid)}else if(d.tags.includes(o)&&d.uuid!=e.uuid){const c=this.resolveMatchingHexConstraints(t.constraints,e,d);c=="preferred"?s.preferred.push(d.uuid):c=="accepted"&&s.accepted.push(d.uuid)}else{const c=this.resolveMatchingHexConstraints(t.constraints,e,d);c=="preferred"?i.preferred.push(d.uuid):c=="accepted"&&i.accepted.push(d.uuid)}}),s.preferred.length>2)return{uuid:this.randomChoice(s.preferred),type:"existing"};if(s.preferred.length>0&&n.preferred.length>4){if(this.randomChoice(["empty","existing"])=="existing")return{uuid:this.randomChoice(s.preferred),type:"existing"};{const c=this.hexByUUID(this.randomChoice(n.preferred));return c.startingTags.push(o),{uuid:c.uuid,type:"empty"}}}else{if(s.preferred.length>0)return{uuid:this.randomChoice(s.preferred),type:"existing"};if(n.preferred.length>0){const c=this.hexByUUID(this.randomChoice(n.preferred));return c.startingTags.push(o),{uuid:c.uuid,type:"empty"}}else if(i.preferred.length>0){const c=this.hexByUUID(this.randomChoice(i.preferred));return c.startingTags.push(o),{uuid:c.uuid,type:"random"}}else{if(s.preferred.length>2)return{uuid:this.randomChoice(s.preferred),type:"existing"};if(s.preferred.length>0&&n.length.preferred>4){if(this.randomChoice(["empty","existing"])=="existing")return{uuid:this.randomChoice(s.preferred),type:"existing"};{const c=this.hexByUUID(this.randomChoice(n.preferred));return c.startingTags.push(o),{uuid:c.uuid,type:"empty"}}}else{if(s.accepted.length>0)return{uuid:this.randomChoice(s.accepted),type:"existing"};if(n.accepted.length>0){const c=this.hexByUUID(this.randomChoice(n.accepted));return c.startingTags.push(o),{uuid:c.uuid,type:"empty"}}else if(i.accepted.length>0){const c=this.hexByUUID(this.randomChoice(i.accepted));return c.startingTags.push(o),{uuid:c.uuid,type:"random"}}else{const d=this.randomChoice(this.hexes.flat().filter(h=>h.terrain!="Default"));return d.startingTags.push(o),{uuid:d.uuid,type:"random"}}}}}},resolveHexTagUpdate(t,e){var o="any";t.tags.length>0&&(o="no");var s=this.refineTag(e,[e]);s.forEach(c=>{t.tags.push(c)});const n=this.generateHexDescription(t,{mention:o});var i=[],l={type:"doc",content:[]};t.content!=null&&(l=t.content),t.content=this.formatDescriptionForTiptap(t,l,n,i);var d=null;t.tags.forEach(c=>{Object.keys(this.contentTags).includes(c)||(d=this.contentTags[this.parentTypeTag(c)][c].icon)}),this.setHexIcon(t,d),i.forEach(c=>{const f=this.hexByUUID(c.uuid);this.resolveHexTagUpdate(f,c.tag)})},cubeHex(t,e,o){if(Math.round(t+e+o)!==0)throw"q + r + s must be 0";return{q:t,r:e,s:o}},convertToCubeCoordinates(t,e){var o=1;if(this.leftmostColumn=="odd")var o=-1;var s=e-1,n=t-1-(e-1+o*(e-1&1))/2,i=-s-n;return this.cubeHex(s,n,i)},cubeHexSubtract(t,e){return this.cubeHex(t.q-e.q,t.r-e.r,t.s-e.s)},cubeHexLength(t){return(Math.abs(t.q)+Math.abs(t.r)+Math.abs(t.s))/2},cubeHexDistance(t,e){return this.cubeHexLength(this.cubeHexSubtract(t,e))},hexToHexDistance(t,e){const o=this.convertToCubeCoordinates(t.row,t.column),s=this.convertToCubeCoordinates(e.row,e.column);return this.cubeHexDistance(o,s)},randomChoice(t){const e=Math.floor(Math.random()*t.length);return t[e]},weightedRandom(t,e){if(t.length!==e.length)throw new Error("Items and weights must be of the same size");if(!t.length)throw new Error("Items must not be empty");const o=[];for(let i=0;i<e.length;i+=1)o[i]=e[i]+(o[i-1]||0);const n=o[o.length-1]*Math.random();for(let i=0;i<t.length;i+=1)if(o[i]>=n)return t[i]},toTitleCase(t){return t.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},logHexDistances(){const t=m(),e=this.hexByUUID;e(t.activeHexes[0]),e(t.activeHexes[1])},mentionedByHexes(t){var e=[];return this.hexes.flat().forEach(o=>{o.content!=null&&o.content.content.length>0&&o.content.content.forEach(s=>{s.content!=null&&s.content.forEach(n=>{n.type=="mention"&&n.attrs.uuid==t&&e.push(o)})})}),e},exportMap(){const t={hexes:this.hexes,leftmostColumn:this.leftmostColumn,nthChildShift:this.nthChildShift,uuid:this.uuid},e=document.createElement("a"),o=new Blob([JSON.stringify(t)],{type:"application/json"});e.href=URL.createObjectURL(o),e.download="map.json",e.click(),URL.revokeObjectURL(e.href)},loadMap(){var t=document.createElement("input");t.type="file",t.onchange=e=>{var o=e.target.files[0],s=new FileReader;s.readAsText(o,"UTF-8"),s.onload=n=>{var i=n.target.result;i=JSON.parse(i),this.hexes=i.hexes,this.leftmostColumn=i.leftmostColumn,this.nthChildShift=i.nthChildShift,this.uuid=i.uuid}},t.click()},rerandomizeHexes(t){const e=m(),o=this.hexByUUID;e.activeHexes.forEach(s=>{this.rerandomizeHex(o(s),t)})},rerandomizeHex(t,e){const o=m();e=="description"?(this.generateHexContents(t,"description"),t.terrain=="Default"&&this.generateTerrain(t,this.terrainProperties[o.terrainType].odds,!0)):e=="tags+description"?(this.generateHexContents(t,"full"),t.terrain=="Default"&&this.generateTerrain(t,this.terrainProperties[o.terrainType].odds,!0)):e=="terrain"?this.generateTerrain(t,this.terrainProperties[o.terrainType].odds,!0):e=="all"&&(this.generateTerrain(t,this.terrainProperties[o.terrainType].odds,!0),this.generateHexContents(t,"full"))},initializeMap(t,e,o){this.initializeHexGrid(e,o),this.fillMap(t,e,o)},getContentAsHTML(t){return new Editor({content:t}).getHTML()},getContentAsPlainText(t){var e="";if(t!=null){const o=this.hexByUUID;t.content.forEach(s=>{Object.keys(s).includes("content")&&s.content.forEach(n=>{n.type=="text"?e=e+n.text:n.type=="mention"&&(e=e+o(n.attrs.uuid))})})}return e.substring(0,60)},drawTest(){const t=m(),e=document.createElement("canvas");e.width=700,e.height=700;var o=e.getContext("2d");o.fillStyle="lightgray",o.fillRect(0,0,e.width,e.height);const s=[t.terrainToImage.grassland.file,t.terrainToImage["deciduous forest"].file],n=[];var i=0;function l(){for(let h=0;h<5;h++)for(let f=0;f<5;f++)h%2==0?o.drawImage(n[0],110*h+55,96*f+48,110,96):o.drawImage(n[1],110*h+55,96*f+48,110,96);var d=e.toDataURL("image/png");const c=document.createElement("a");c.href=d,c.download="testMap.png",c.click(),URL.revokeObjectURL(c.href)}s.forEach(d=>{const c=new Image;c.src=d,c.onload=()=>{i+=1,i===s.length&&l()},n.push(c)})},exportMapImage(t,e,o){const s=m(),n=t*o,i=e*o,l=document.createElement("canvas");this.hexes[1].length>this.hexes[0].length?l.width=(this.hexes[1].length+this.hexes[0].length/2-.5)*i:l.width=(this.hexes[0].length+this.hexes[1].length/2-.5)*i,l.height=(this.hexes.length/2-.5)*n;var d=l.getContext("2d");d.fillStyle="lightgray",d.fillRect(0,0,l.width,l.height);const c={};var h=0,f=[];Object.keys(s.terrainToImage).forEach(g=>{f.push({name:g,file:s.terrainToImage[g].file})}),Object.keys(s.iconProperties).forEach(g=>{f.push({name:g,file:s.iconProperties[g].file})}),f.forEach(g=>{const y=new Image;y.src=g.file,y.onload=()=>{h+=1,h===f.length&&this.exportMapWithLoadedImages(l,d,c,n,i)},c[g.name]=y})},exportMapWithLoadedImages(t,e,o,s,n){const i=m(),l=n/110*18;e.fillStyle="white",e.font="bold "+l+"px arial";for(let f=2;f<this.hexes.length;f++)for(let g=0;g<this.hexes[f].length;g++){const y=this.hexes[f][g];if(y.terrain!="Default"){var d=0;if((f+1)%2==0&&this.leftmostColumn=="even"?d=0:(f+1)%2==0&&this.leftmostColumn=="odd"||(f+1)%2!=0&&this.leftmostColumn=="even"?d=n*.75+1:(f+1)%2!=0&&this.leftmostColumn=="odd"&&(d=0),e.drawImage(o[y.terrain],(n+(n/2+2.5))*g+d-n/2,s*f-(s/2-.5)*(f+1),n,s),y.icon!=null&&i.mapExportAsPNGShowHexIcons&&e.drawImage(o[y.icon],(n+(n/2+2.5))*g+n*3/14+d-n/2,s*f-(s/2-.5)*(f+1)+s/4,n/1.75,n/1.75),i.mapExportAsPNGShowHexNumbers){const B=e.measureText(y.id).width;e.fillText(y.id,(n+(n/2+2.5))*g+(n-B)/2+d-n/2,s*f-(s/2-.5)*(f+1)+s/4.5)}}}this.hexes.flat().forEach(f=>{});var c=t.toDataURL("image/png");const h=document.createElement("a");h.href=c,i.saveName!=null&&i.saveName!=""?h.download=i.saveName+".png":h.download="map.png",h.click(),URL.revokeObjectURL(h.href)},sortHexesComparison(t,e){if(t.row>e.row)return 1;if(e.row>t.row)return-1;if(t.column>e.column)return 1;if(e.column>t.column)return-1},async asyncForHexes(t,e,o,s){for(let n=0;n<e;n++)await new Promise((l,d)=>{setTimeout(()=>{s(t,n,o),l()},0)})},unifyHexProcessing(t,e,o){const s=m();o.content.push({type:"paragraph",content:[{type:"horizontalRule"}]}),o.content.push({type:"paragraph",content:[{type:"hex-image",attrs:{src:s.terrainToImage[t[e].terrain].file,style:"width:46px; padding-right: 10px"}},{type:"text",text:t[e].id,marks:[{type:"headingH1",attrs:{id:t[e].uuid}}]}]});var n=[{type:"text",text:"Mentioned by: "}],i=0;this.mentionedByHexes(t[e].uuid).forEach(l=>{i>0&&n.push({type:"text",text:", "}),n.push({type:"mention",attrs:{uuid:l.uuid}}),i+=1}),n.length>1&&o.content.push({type:"paragraph",content:n}),t[e].content.content.forEach(l=>{o.content.push(l)}),o.content.push({type:"paragraph",content:[{type:"text",text:"Back to top",marks:[{type:"link",attrs:{href:"#hex-container-view",target:"_self"}}]}]})},logLeftmostColumn(){console.log(this.leftmostColumn)}}}),m=j({id:"editor",state:()=>({showEditor:!0,showViewer:!1,showDocumentation:!1,activeHexes:[1],activeRow:1,selectedTerrain:null,selectedIcon:null,tagsSectionVisible:!0,textSectionVisible:!0,terrainSectionVisible:!0,iconsSectionVisible:!0,mentionedBySectionVisible:!0,terrainToImage:I.terrainToImage,multipleHexesImage:I.multiple_hexes,iconProperties:I.icons,initializeMapModelShown:!0,initializeHexRows:8,initializeHexColumns:8,mentioningHexes:[],currentSelectedContent:null,terrainType:"temperate forest",terrainDropdownOpen:!1,settingsOpen:!1,showTerrainsAsPanel:!0,saveName:null,showLoadModal:!1,loadName:null,showSaveNameModal:!1,savingIndicator:!1,exportToPNGTrigger:!0,mapExportAsPNGShowHexNumbers:!0,mapExportAsPNGShowHexIcons:!0,baseFractionWithContent:.5,showInfoModal:!1,terrainToBeRandomized:!1,tagsToBeRandomized:!1,descriptionToBeRandomized:!1,mode:"edit",mentionUUID:1,viewModeProgress:0,showViewModeLoaderModal:!1,hexScale:1,showHexLabels:!0,currentTool:"hex-editor",paintTerrain:"Default",paintTerrainProperties:I.terrainToImage,paintedHexes:[],expandMapOpen:!1,generateContentOnMapExpand:!1,topRowsToAdd:0,bottomRowsToAdd:0,leftColumnsToAdd:0,rightColumnsToAdd:0,showAttributionModal:!1,savedMaps:[]}),getters:{activeHexImage(t){const e=w();return this.activeHexes.length==1?t.terrainToImage[e.hexByUUID(t.activeHexes[0]).terrain].file:t.multipleHexesImage.file},selectedHexCount(t){return t.activeHexes.length},title(t){const o=w().hexByUUID;return t.activeHexes.length>1?"Editing "+t.activeHexes.length+" hexes":"Editing Hex ".concat(o(t.activeHexes).id)},terrainDropdownOptions(t){var e=[];return Object.keys(t.terrainToImage).forEach(o=>{var s=t.terrainToImage[o];s.label=o,e.push(s)}),e},listSavedMaps(t){const e=new RegExp("hexmapmaker-map-");var o=[];return Object.keys(localStorage).forEach(s=>{e.test(s)&&o.push(s.replace(e,""))}),this.savedMaps=o,o},getMentionUUID(t){return t.mentionUUID+=1,t.mentionUUID-1}},actions:{getSavedMaps(){const t=new RegExp("hexmapmaker-map-");var e=[];Object.keys(localStorage).forEach(o=>{t.test(o)&&e.push(o.replace(t,""))}),console.log("maps are ",e),this.savedMaps=e},selectHex(t,e){if(e.shiftKey){if(!this.activeHexes.includes(t.uuid))this.activeHexes.push(t.uuid);else if(this.activeHexes.includes(t.uuid)&&this.activeHexes.length>1){const o=this.activeHexes.indexOf(t.uuid);o>-1&&this.activeHexes.splice(o,1)}}else this.activeHexes=[t.uuid];if(this.activeHexes.length>1)this.selectedTerrain=null,this.selectedIcon=null,Object.values(this.terrainToImage).forEach(o=>{o.selected=!1});else{this.selectedTerrain=t.terrain,Object.values(this.terrainToImage).forEach(s=>{s.selected=!1}),this.terrainToImage[t.terrain].selected=!0,Object.values(this.iconProperties).forEach(s=>{s.selected=!1}),t.icon!=null&&(this.iconProperties[t.icon].selected=!0),this.selectedIcon=t.icon;const o=w();this.mentioningHexes=o.mentionedByHexes(t.uuid)}},deselectAllHexes(){this.activeHexes=[],this.title="No hex selected",this.selectedTerrain=null},selectTerrain(t){const e=w(),o=e.hexByUUID;this.selectedTerrain=t,Object.values(this.terrainToImage).forEach(s=>{s.selected=!1}),this.terrainToImage[t].selected=!0,this.activeHexes.forEach(s=>{e.setHexTerrain(o(s),t,!0)})},selectIcon(t){const e=w(),o=e.hexByUUID;this.selectedIcon=t,Object.values(this.iconProperties).forEach(s=>{s.selected=!1}),this.iconProperties[t].selected=!0,this.activeHexes.forEach(s=>{e.setHexIcon(o(s),t)})},toggleSection(t){t=="terrain"?this.terrainSectionVisible=!this.terrainSectionVisible:t=="icons"?this.iconsSectionVisible=!this.iconsSectionVisible:t=="text"?this.textSectionVisible=!this.textSectionVisible:t=="tags"&&(this.tagsSectionVisible=!this.tagsSectionVisible)},closeInitializeMapModal(){this.initializeMapModelShown=!1},logInitializeMapModelShown(){console.log(this.initializeMapModelShown)},mentionTagHoverStart(t){this.currentSelectedContent=t.content},toggleTerrainDropdown(){this.terrainDropdownOpen=!this.terrainDropdownOpen},setTerrainType(t){this.terrainType=t},logActive(){console.log(this.activeHexes)},toggleSettingsModal(){this.settingsOpen=!this.settingsOpen},toggleExpandMapModal(){this.expandMapOpen=!this.expandMapOpen},saveMapLocally(){if(this.saveName==null||this.saveName=="")this.toggleSaveNameModal();else{this.showSaveNameModal=!1;const t=w(),e={hexes:t.hexes,leftmostColumn:t.leftmostColumn,nthChildShift:t.nthChildShift,uuid:t.uuid};this.localSave("hexmapmaker-map-"+this.saveName,e),this.savingIndicator=!0,setTimeout(()=>{this.savingIndicator=!1},2e3)}},loadLocalMap(){const t=w(),e=this.loadData("hexmapmaker-map-"+this.loadName);t.hexes=e.hexes,t.leftmostColumn=e.leftmostColumn,t.nthChildShift=e.nthChildShift,t.uuid=e.uuid,this.showLoadModal=!1},localSave(t,e){localStorage.setItem(t,JSON.stringify(e))},loadData(t){var e=JSON.parse(localStorage.getItem(t));return e},deleteLocalMap(){window.confirm("Are you sure you want to delete this map? This cannot be undone.")&&(localStorage.removeItem("hexmapmaker-map-"+this.loadName),es.getSavedMaps())},toggleLoadModal(){this.showLoadModal=!this.showLoadModal},toggleInfoModal(){this.showInfoModal=!this.showInfoModal},listAllStored(){var t=[];Object.keys(localStorage).forEach(e=>{t.push({key:e,value:localStorage.getItem(e)})})},toggleSaveNameModal(){this.showSaveNameModal=!this.showSaveNameModal},toggleViewModeLoaderModal(){this.showViewModeLoaderModal=!this.showViewModeLoaderModal},triggerExportToPNG(){this.exportToPNGTrigger=!0},setRandomizeIndicator(t){t.includes("description")&&(this.descriptionToBeRandomized=!0),t.includes("tags")&&(this.tagsToBeRandomized=!0),t.includes("terrain")&&(this.terrainToBeRandomized=!0)},removeRandomizeIndicator(t){t.includes("description")&&(this.descriptionToBeRandomized=!1),t.includes("tags")&&(this.tagsToBeRandomized=!1),t.includes("terrain")&&(this.terrainToBeRandomized=!1)},toggleAttributionModal(){this.showAttributionModal=!this.showAttributionModal},toggleViewMode(){m(),this.mode=="edit"?this.mode="view":this.mode="edit"},scrollDown(t){window.scrollBy(0,t),console.log("scroll down ",t)},jumpToHex(t){const e=document.createElement("a");e.href="#"+t,e.click(),URL.revokeObjectURL(e.href),window.scrollBy(0,-80)},hexClicked(t,e){const o=w();this.mode=="edit"&&this.currentTool=="hex-editor"?this.selectHex(t,e):this.mode=="edit"&&this.currentTool=="terrain-painter"?o.paintHexTerrain(t,this.paintTerrain):this.mode=="view"&&this.jumpToHex(t.uuid)},selectPaintTerrain(t){this.paintTerrain=t,Object.values(this.terrainToImage).forEach(e=>{e.selected=!1}),this.paintTerrainProperties[t].selected=!0},expandMap(){const t=w();console.log("top, bottom, left, right to add",this.topRowsToAdd,this.bottomRowsToAdd,this.leftColumnsToAdd,this.rightColumnsToAdd);for(let o=0;o<this.topRowsToAdd;o++)t.addRow("top",t.countColumns,t.defaultHexProperties),console.log("added top");for(let o=0;o<this.bottomRowsToAdd;o++)t.addRow("bottom",t.countColumns,t.defaultHexProperties),console.log("added bottom");for(let o=0;o<this.leftColumnsToAdd;o++)t.addColumn("left",t.defaultHexProperties),t.toggleLeftmostColumn(),console.log("added left");for(let o=0;o<this.rightColumnsToAdd;o++)t.addColumn("right",t.defaultHexProperties),console.log("added right");t.shiftHexNumbers(),console.log("shifted numbers");const e=t.hexByPosition;if(this.generateContentOnMapExpand){if(this.topRowsToAdd>0){for(let o=this.topRowsToAdd+1;o>1;o--)for(let s=2;s<t.countColumns;s++)t.generateTerrain(e(o,s),t.terrainProperties[this.terrainType].odds,!1);console.log("generated terrain top")}if(this.bottomRowsToAdd>0){console.log("lines",t.countLines);for(let o=t.countLines/2-this.bottomRowsToAdd;o<t.countLines/2;o++)for(let s=2;s<t.countColumns;s++){const n=t.hexByPosition;t.generateTerrain(n(o,s),t.terrainProperties[this.terrainType].odds,!1)}console.log("generated terrain bottom")}if(this.leftColumnsToAdd>0){for(let o=this.leftColumnsToAdd+1;o>1;o--)for(let s=2;s<t.countLines/2;s++)console.log("trying to set ",s,o),t.generateTerrain(e(s,o),t.terrainProperties[this.terrainType].odds,!1);console.log("generated terrain left")}if(this.rightColumnsToAdd>0){for(let o=t.countColumns-this.rightColumnsToAdd;o<t.countColumns;o++)for(let s=2;s<t.countLines/2;s++){const n=t.hexByPosition;t.generateTerrain(n(s,o),t.terrainProperties[this.terrainType].odds,!1)}console.log("generated terrain right")}t.hexes.forEach(o=>{o.forEach(s=>{s.terrain!="Default"&&(s.row<=this.topRowsToAdd||s.row>=t.countLines/2-this.bottomRowsToAdd||s.column<this.leftColumnsToAdd||s.column>=t.countColumns-this.rightColumnsToAdd)&&t.generateHexContents(s,"none")})}),console.log("generated contents")}this.topRowsToAdd=0,this.bottomRowsToAdd=0,this.leftColumnsToAdd=0,this.rightColumnsToAdd=0,this.toggleExpandMapModal()}}});const Ge=a("div",{class:"modal-background"},null,-1),Ke={class:"modal-card initialize-map-settings"},Je=a("header",{class:"modal-card-head"},[a("p",{class:"modal-card-title"},"Initialize map")],-1),Qe={class:"modal-card-body"},We={class:"block"},Xe=a("label",{class:"label"},"Terrain Type",-1),Ze={class:"dropdown-trigger"},Ye={class:"button","aria-haspopup":"true","aria-controls":"dropdown-menu"},et=a("span",{class:"icon is-small"},[a("i",{class:"ri-arrow-down-s-line","aria-hidden":"true"})],-1),tt={class:"dropdown-menu",id:"dropdown-menu",role:"menu"},ot={class:"dropdown-content"},st={class:"block"},nt=M(" Base fraction of hexed with content generated: "),it=a("label",{class:"label"},"Rows",-1),at={class:"control"},rt=a("label",{class:"label"},"Columns",-1),lt={class:"control"},dt={class:"modal-card-foot"},ct={setup(t){const e=w(),o=m();return(s,n)=>(u(),p("div",{class:b(["modal",{"is-active":r(o).initializeMapModelShown}])},[Ge,a("div",Ke,[Je,a("section",Qe,[a("div",We,[Xe,a("div",{class:b(["dropdown",{"is-active":r(o).terrainDropdownOpen}]),onClick:n[2]||(n[2]=(...i)=>r(o).toggleTerrainDropdown&&r(o).toggleTerrainDropdown(...i))},[a("div",Ze,[a("button",Ye,[a("span",null,T(r(o).terrainType),1),et])]),a("div",tt,[a("div",ot,[a("a",{href:"#",class:"dropdown-item",onClick:n[0]||(n[0]=i=>r(o).setTerrainType("temperate forest"))}," temperate forest "),a("a",{href:"#",class:"dropdown-item",onClick:n[1]||(n[1]=i=>r(o).setTerrainType("hot"))}," hot ")])])],2)]),a("div",st,[a("label",null,[nt,_(a("input",{type:"number","onUpdate:modelValue":n[3]||(n[3]=i=>r(o).baseFractionWithContent=i)},null,512),[[H,r(o).baseFractionWithContent]])])]),it,a("div",at,[_(a("input",{class:"input",type:"number",min:"1",placeholder:"Number of rows","onUpdate:modelValue":n[4]||(n[4]=i=>r(o).initializeHexRows=i)},null,512),[[H,r(o).initializeHexRows]])]),rt,a("div",lt,[_(a("input",{class:"input",type:"number",min:"1",placeholder:"Number of columns","onUpdate:modelValue":n[5]||(n[5]=i=>r(o).initializeHexColumns=i)},null,512),[[H,r(o).initializeHexColumns]])])]),a("footer",dt,[a("button",{class:"button is-success",onClick:n[6]||(n[6]=i=>r(e).initializeMap(r(o).terrainType,r(o).initializeHexRows,r(o).initializeHexColumns))},"Initialize map"),a("button",{class:"button is-success",onClick:n[7]||(n[7]=i=>r(e).initializeMap(r(o).terrainType,2,2))},"2x2"),a("button",{class:"button is-success",onClick:n[8]||(n[8]=i=>r(e).initializeMap(r(o).terrainType,3,3))},"3x3"),a("button",{class:"button is-success",onClick:n[9]||(n[9]=i=>r(e).initializeMap(r(o).terrainType,4,4))},"4x4"),a("button",{class:"button is-success",onClick:n[10]||(n[10]=i=>r(e).initializeMap(r(o).terrainType,8,8))},"8x8"),a("button",{class:"button is-success",onClick:n[11]||(n[11]=i=>r(e).initializeMap(r(o).terrainType,16,16))},"16x16")])])],2))}};const ht=a("div",{class:"modal-background"},null,-1),ut={class:"modal-card settings-panel"},ft={class:"modal-card-head"},pt=a("p",{class:"modal-card-title"},"Settings",-1),gt={class:"modal-card-body"},mt={class:"block"},bt=a("h1",{class:"title"},"Content Settings",-1),yt=M(" Base fraction of hexed with content generated: "),wt={class:"block"},vt=a("h1",{class:"title"},"Display Settings",-1),xt=M(" Hex scale: "),kt=a("br",null,null,-1),_t={class:"checkbox"},Tt=M(" Show hex numbers "),At=a("hr",null,null,-1),Mt={class:"block"},Ct=a("h1",{class:"title"},"Save Map Settings",-1),Ht=a("label",null,"Name to save map under",-1),It=a("hr",null,null,-1),St={class:"block"},$t=a("h1",{class:"title"},"Export to PNG Settings",-1),Lt={class:"checkbox"},Bt=M(" Show hex labels "),Ut={class:"checkbox"},Rt=M(" Show hex icons "),zt=a("footer",{class:"modal-card-foot"},null,-1),Et={setup(t){w();const e=m();return(o,s)=>(u(),p("div",{class:b(["modal",{"is-active":r(e).settingsOpen}])},[ht,a("div",ut,[a("header",ft,[pt,a("button",{class:"delete","aria-label":"close",onClick:s[0]||(s[0]=(...n)=>r(e).toggleSettingsModal&&r(e).toggleSettingsModal(...n))})]),a("section",gt,[a("div",mt,[bt,a("label",null,[yt,_(a("input",{type:"number","onUpdate:modelValue":s[1]||(s[1]=n=>r(e).baseFractionWithContent=n)},null,512),[[H,r(e).baseFractionWithContent]])])]),a("div",wt,[vt,a("label",null,[xt,_(a("input",{type:"number","onUpdate:modelValue":s[2]||(s[2]=n=>r(e).hexScale=n)},null,512),[[H,r(e).hexScale]])]),kt,a("label",_t,[_(a("input",{type:"checkbox","onUpdate:modelValue":s[3]||(s[3]=n=>r(e).showHexLabels=n)},null,512),[[D,r(e).showHexLabels]]),Tt])]),At,a("div",Mt,[Ct,Ht,_(a("input",{class:"input",type:"text",placeholder:"Name to save map under","onUpdate:modelValue":s[4]||(s[4]=n=>r(e).saveName=n)},null,512),[[H,r(e).saveName]])]),It,a("div",St,[$t,a("div",null,[a("label",Lt,[_(a("input",{type:"checkbox","onUpdate:modelValue":s[5]||(s[5]=n=>r(e).mapExportAsPNGShowHexNumbers=n)},null,512),[[D,r(e).mapExportAsPNGShowHexNumbers]]),Bt])]),a("div",null,[a("label",Ut,[_(a("input",{type:"checkbox","onUpdate:modelValue":s[6]||(s[6]=n=>r(e).mapExportAsPNGShowHexIcons=n)},null,512),[[D,r(e).mapExportAsPNGShowHexIcons]]),Rt])])])]),zt])],2))}};const Dt={class:"modal is-active"},Pt=a("div",{class:"modal-background"},null,-1),Ft={class:"modal-card"},Vt={class:"modal-card-head"},Ot=a("p",{class:"modal-card-title"},"Load Map From Local Storage",-1),Nt={class:"modal-card-body"},jt={class:"modal-card-foot"},qt={setup(t){w();const e=m();function o(){e.getSavedMaps(),e.loadName=null}return q(()=>{o()}),(s,n)=>(u(),p("div",Dt,[Pt,a("div",Ft,[a("header",Vt,[Ot,a("button",{class:"delete","aria-label":"close",onClick:n[0]||(n[0]=(...i)=>r(e).toggleLoadModal&&r(e).toggleLoadModal(...i))})]),a("section",Nt,[x(r(G),{modelValue:r(e).loadName,"onUpdate:modelValue":n[1]||(n[1]=i=>r(e).loadName=i),"close-on-select":!0,searchable:!0,"create-option":!1,placeholder:"Select map to load...",options:r(e).savedMaps},null,8,["modelValue","options"])]),a("footer",jt,[a("button",{class:"button is-primary",onClick:n[2]||(n[2]=(...i)=>r(e).loadLocalMap&&r(e).loadLocalMap(...i))},"Load Selected Map"),a("button",{class:"button is-danger",onClick:n[3]||(n[3]=(...i)=>r(e).deleteLocalMap&&r(e).deleteLocalMap(...i))},"Delete Selected Map"),a("button",{class:"button",onClick:n[4]||(n[4]=(...i)=>r(e).toggleLoadModal&&r(e).toggleLoadModal(...i))},"Cancel")])])]))}},Gt=a("div",{class:"modal-background"},null,-1),Kt={class:"modal-card"},Jt={class:"modal-card-head"},Qt=a("p",{class:"modal-card-title"},"Save As",-1),Wt={class:"modal-card-body"},Xt=a("label",null,"Name to save map under",-1),Zt={class:"modal-card-foot"},Yt={setup(t){w();const e=m();return(o,s)=>(u(),p("div",{class:b(["modal",{"is-active":r(e).showSaveNameModal}])},[Gt,a("div",Kt,[a("header",Jt,[Qt,a("button",{class:"delete","aria-label":"close",onClick:s[0]||(s[0]=(...n)=>r(e).toggleSaveNameModal&&r(e).toggleSaveNameModal(...n))})]),a("section",Wt,[Xt,_(a("input",{class:"input",type:"text",placeholder:"Name to save map under","onUpdate:modelValue":s[1]||(s[1]=n=>r(e).saveName=n)},null,512),[[H,r(e).saveName]])]),a("footer",Zt,[a("button",{class:"button is-primary",onClick:s[2]||(s[2]=(...n)=>r(e).saveMapLocally&&r(e).saveMapLocally(...n))},"Save Map to Local Storage"),a("button",{class:"button",onClick:s[3]||(s[3]=(...n)=>r(e).toggleSaveNameModal&&r(e).toggleSaveNameModal(...n))},"Cancel")])])],2))}};const eo=a("div",{class:"modal-background"},null,-1),to={class:"modal-card info-modal"},oo={class:"modal-card-head"},so=a("p",{class:"modal-card-title"},"Info",-1),no={class:"modal-card-body"},io=a("header",{class:"subtitle"},"Tags by category",-1),ao={class:"table"},ro=a("thead",null,[a("tr",null,[a("th",null,"Category"),a("th",null,"Tag count"),a("th",null,"Tags")])],-1),lo=a("footer",{class:"modal-card-foot"},null,-1),co={setup(t){const e=w(),o=m();return(s,n)=>(u(),p("div",{class:b(["modal",{"is-active":r(o).showInfoModal}])},[eo,a("div",to,[a("header",oo,[so,a("button",{class:"delete","aria-label":"close",onClick:n[0]||(n[0]=(...i)=>r(o).toggleInfoModal&&r(o).toggleInfoModal(...i))})]),a("section",no,[io,a("table",ao,[ro,a("tbody",null,[(u(!0),p(A,null,S(Object.keys(r(e).contentTags),i=>(u(),p("tr",null,[a("td",null,T(i),1),a("td",null,T(Object.keys(r(e).contentTags[i]).length),1),a("td",null,T(Object.keys(r(e).contentTags[i]).join(", ")),1)]))),256))])])]),lo])],2))}};const ho=a("div",{class:"modal-background"},null,-1),uo={class:"modal-card settings-panel"},fo={class:"modal-card-head"},po=a("p",{class:"modal-card-title"},"Expand Map",-1),go={class:"modal-card-body"},mo={class:"block"},bo={class:"checkbox"},yo=M(" Generate content to fill expanded area? "),wo=a("br",null,null,-1),vo=M(" Top rows to add: "),xo=a("br",null,null,-1),ko=M(" Bottom rows to add: "),_o=a("br",null,null,-1),To=M(" Left columns to add: "),Ao=a("br",null,null,-1),Mo=M(" Right columns to add: "),Co={class:"modal-card-foot"},Ho={setup(t){w();const e=m();return(o,s)=>(u(),p("div",{class:b(["modal",{"is-active":r(e).expandMapOpen}])},[ho,a("div",uo,[a("header",fo,[po,a("button",{class:"delete","aria-label":"close",onClick:s[0]||(s[0]=(...n)=>r(e).toggleExpandMapModal&&r(e).toggleExpandMapModal(...n))})]),a("section",go,[a("div",mo,[a("label",bo,[_(a("input",{type:"checkbox","onUpdate:modelValue":s[1]||(s[1]=n=>r(e).generateContentOnMapExpand=n)},null,512),[[D,r(e).generateContentOnMapExpand]]),yo]),wo,a("label",null,[vo,_(a("input",{type:"number","onUpdate:modelValue":s[2]||(s[2]=n=>r(e).topRowsToAdd=n)},null,512),[[H,r(e).topRowsToAdd]])]),xo,a("label",null,[ko,_(a("input",{type:"number","onUpdate:modelValue":s[3]||(s[3]=n=>r(e).bottomRowsToAdd=n)},null,512),[[H,r(e).bottomRowsToAdd]])]),_o,a("label",null,[To,_(a("input",{type:"number","onUpdate:modelValue":s[4]||(s[4]=n=>r(e).leftColumnsToAdd=n)},null,512),[[H,r(e).leftColumnsToAdd]])]),Ao,a("label",null,[Mo,_(a("input",{type:"number","onUpdate:modelValue":s[5]||(s[5]=n=>r(e).rightColumnsToAdd=n)},null,512),[[H,r(e).rightColumnsToAdd]])])])]),a("footer",Co,[a("button",{class:"button is-primary",onClick:s[6]||(s[6]=(...n)=>r(e).expandMap&&r(e).expandMap(...n))},"Expand Map"),a("button",{class:"button",onClick:s[7]||(s[7]=(...n)=>r(e).toggleExpandMapModal&&r(e).toggleExpandMapModal(...n))},"Cancel")])])],2))}},Io=a("div",{class:"modal-background"},null,-1),So={class:"modal-card"},$o={class:"modal-card-head"},Lo=a("p",{class:"modal-card-title"},"Loading View Mode",-1),Bo={class:"modal-card-body"},Uo=M(" Loading view mode "),Ro=["value"],zo=a("footer",{class:"modal-card-foot"},null,-1),Eo={setup(t){w();const e=m();return(o,s)=>(u(),p("div",{class:b(["modal",{"is-active":r(e).showViewModeLoaderModal}])},[Io,a("div",So,[a("header",$o,[Lo,a("button",{class:"delete","aria-label":"close",onClick:s[0]||(s[0]=(...n)=>r(e).toggleViewModeLoaderModal&&r(e).toggleViewModeLoaderModal(...n))})]),a("section",Bo,[Uo,a("progress",{class:"progress",value:r(e).viewModeProgress,max:"100"},T(r(e).viewModeProgress*100),9,Ro)]),zo])],2))}},Do=a("div",{class:"modal-background"},null,-1),Po={class:"modal-card"},Fo={class:"modal-card-head"},Vo=a("p",{class:"modal-card-title"},"Attribution",-1),Oo=_e('<section class="modal-card-body"><p>Hex icons and interface icons are sourced from flaticon, as attributed below.</p> Uicons by <a href="https://www.flaticon.com/uicons">Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/architecture" title="architecture icons">Architecture icons created by Freepik - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/architecture-and-city" title="architecture and city icons">Architecture and city icons created by tulpahn - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/barn" title="barn icons">Barn icons created by AmethystDesign - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/bow" title="bow icons">Bow icons created by max.icons - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/bridge" title="bridge icons">Bridge icons created by Freepik - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/broken" title="broken icons">Broken icons created by surang - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/cabain" title="cabain icons">Cabain icons created by Freepik - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/cabin" title="cabin icons">Cabin icons created by Freepik - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/castle" title="castle icons">Castle icons created by Pause08 - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/cave" title="cave icons">Cave icons created by Freepik - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/chimera" title="chimera icons">Chimera icons created by max.icons - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/collapse" title="collapse icons">Collapse icons created by Freepik - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/crystal-ball" title="crystal ball icons">Crystal ball icons created by Freepik - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/cultures" title="cultures icons">Cultures icons created by Freepik - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/destruction" title="destruction icons">Destruction icons created by Freepik - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/druid" title="druid icons">Druid icons created by Freepik - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/elf" title="elf icons">Elf icons created by Freepik - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/fairy" title="fairy icons">Fairy icons created by Chanut-is-Industries - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/fortress" title="fortress icons">Fortress icons created by Freepik - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/gallow" title="gallow icons">Gallow icons created by Freepik - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/haunted-house" title="haunted house icons">Haunted house icons created by mikan933 - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/heritage" title="heritage icons">Heritage icons created by Flat Icons - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/hood" title="hood icons">Hood icons created by Freepik - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/hot-spring" title="hot spring icons">Hot spring icons created by winnievinzence - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/hot-spring" title="hot spring icons">Hot spring icons created by Smashicons - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/hut" title="hut icons">Hut icons created by Smashicons - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/library" title="library icons">Library icons created by BZZRINCANTATION - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/lumberjack" title="lumberjack icons">Lumberjack icons created by Freepik - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/manor" title="manor icons">Manor icons created by Freepik - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/medieval" title="medieval icons">Medieval icons created by max.icons - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/medieval" title="medieval icons">Medieval icons created by Freepik - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/modern" title="modern icons">Modern icons created by Freepik - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/monastery" title="monastery icons">Monastery icons created by GOWI - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/mongolia" title="mongolia icons">Mongolia icons created by Wichai.wi - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/neighborhood" title="neighborhood icons">Neighborhood icons created by itim2101 - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/observatory" title="observatory icons">Observatory icons created by Smashicons - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/pond" title="pond icons">Pond icons created by Mihimihi - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/pond" title="pond icons">Pond icons created by Chanut-is-Industries - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/portal" title="portal icons">Portal icons created by Vitaly Gorbachev - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/quarry" title="quarry icons">Quarry icons created by Marz Gallery - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/queen" title="queen icons">Queen icons created by Freepik - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/ruins" title="ruins icons">Ruins icons created by kerismaker - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/ruined" title="ruined icons">Ruined icons created by Freepik - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/shipwreck" title="shipwreck icons">Shipwreck icons created by Freepik - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/shrine" title="shrine icons">Shrine icons created by Freepik - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/stonehenge" title="stonehenge icons">Stonehenge icons created by Freepik - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/sword" title="sword icons">Sword icons created by Freepik - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/telescope" title="telescope icons">Telescope icons created by Freepik - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/tent" title="tent icons">Tent icons created by Sweetline Graphic - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/toad" title="toad icons">Toad icons created by Freepik - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/witch" title="witch icons">Witch icons created by DinosoftLabs - Flaticon</a><br><a target="_blank" href="https://www.flaticon.com/free-icons/wolf" title="wolf icons">Wolf icons created by tulpahn - Flaticon</a></section><footer class="modal-card-foot"></footer>',2),No={setup(t){w();const e=m();return(o,s)=>(u(),p("div",{class:b(["modal",{"is-active":r(e).showAttributionModal}])},[Do,a("div",Po,[a("header",Fo,[Vo,a("button",{class:"delete","aria-label":"close",onClick:s[0]||(s[0]=(...n)=>r(e).toggleAttributionModal&&r(e).toggleAttributionModal(...n))})]),Oo])],2))}};var jo="/HexMapBuilderVue/HexMapMakerLogoLight.png";var V=(t,e)=>{const o=t.__vccOpts||t;for(const[s,n]of e)o[s]=n;return o};const L=t=>(Te("data-v-057b7450"),t=t(),Ae(),t),qo={class:"navbar is-dark has-shadow is-fixed-top",role:"navigation","aria-label":"main navigation"},Go=L(()=>a("div",{class:"navbar-brand"},[a("a",{class:"navbar-item",href:"https://github.com/mgordin/HexMapBuilderVue"},[a("img",{src:jo,height:"60"})])],-1)),Ko={class:"navbar-start"},Jo={class:"navbar-item"},Qo={key:0,class:"navbar-item has-text-grey-darker"},Wo={class:"multiselect-single-label"},Xo=["src"],Zo=["src"],Yo={class:"navbar-item has-dropdown is-hoverable"},ts=L(()=>a("a",{class:"navbar-link"},"Save / Load",-1)),os={class:"navbar-dropdown"},ss=L(()=>a("hr",{class:"dropdown-divider"},null,-1)),ns=L(()=>a("hr",{class:"dropdown-divider"},null,-1)),is={class:"navbar-item has-dropdown is-hoverable"},as=L(()=>a("a",{class:"navbar-link"},"Debug Buttons",-1)),rs={class:"navbar-dropdown"},ls={class:"navbar-end"},ds={key:0,class:"navbar-item save-indicator"},cs=L(()=>a("i",{class:"fi fi-bs-disk save-icon"},null,-1)),hs=L(()=>a("p",{class:"save-text"}," Map Saved",-1)),us=[cs,hs],fs=L(()=>a("div",{class:"navbar-item"},[a("a",{href:"https://github.com/mgordin/HexMapBuilderVue",target:"_blank"},[a("span",{class:"fi fi-brands-github github-icon"})])],-1)),ps={setup(t){const e=m(),o=w();function s(){var n=document.getElementById("hex-container-view");console.log(n),n=document.getElementById("hexDetailReader"),console.log(n),n=document.getElementsByTagName("img"),console.log(n)}return(n,i)=>(u(),p("nav",qo,[Go,a("div",Ko,[a("div",Jo,[a("div",{class:"tags has-addons modeSelector",onClick:i[0]||(i[0]=(...l)=>r(e).toggleViewMode&&r(e).toggleViewMode(...l))},[a("span",{class:b(["tag",{"is-primary":r(e).mode=="edit"}])},"Edit",2),a("span",{class:b(["tag",{"is-primary":r(e).mode=="view"}])},"View",2)])]),r(e).mode=="edit"?(u(),p("div",Qo,[x(r(G),{modelValue:r(e).currentTool,"onUpdate:modelValue":i[1]||(i[1]=l=>r(e).currentTool=l),class:"multiselect-css",mode:n.single,canClear:!1,canDeselect:!1,"close-on-select":!0,searchable:!0,"create-option":!1,placeholder:"Select tool...",options:[{value:"hex-editor",label:"Hex editor",icon:"./misc-images/hexagon.png"},{value:"terrain-painter",label:"Terrain painter",icon:"./misc-images/paint-roller.png"}]},{singlelabel:R(({value:l})=>[a("div",Wo,[a("img",{class:"label-icon",src:l.icon},null,8,Xo),M(" "+T(l.label),1)])]),option:R(({option:l})=>[a("img",{class:"option-icon",src:l.icon},null,8,Zo),M(" "+T(l.label),1)]),_:1},8,["modelValue","mode","options"])])):v("",!0),a("div",Yo,[ts,a("div",os,[a("a",{class:"navbar-item",onClick:i[2]||(i[2]=(...l)=>r(o).exportMap&&r(o).exportMap(...l))},"Export map to file"),a("a",{class:"navbar-item",onClick:i[3]||(i[3]=(...l)=>r(o).loadMap&&r(o).loadMap(...l))},"Load map from file"),ss,a("a",{class:"navbar-item",onClick:i[4]||(i[4]=(...l)=>r(e).saveMapLocally&&r(e).saveMapLocally(...l))},"Save map to local storage"),a("a",{class:"navbar-item",onClick:i[5]||(i[5]=(...l)=>r(e).toggleLoadModal&&r(e).toggleLoadModal(...l))},"Load map from local storage"),ns,a("a",{class:"navbar-item",onClick:i[6]||(i[6]=l=>r(o).exportMapImage(96,110,1))},"Export to PNG")])]),a("a",{class:"navbar-item",onClick:i[7]||(i[7]=(...l)=>r(e).toggleSettingsModal&&r(e).toggleSettingsModal(...l))},"Settings"),a("a",{class:"navbar-item",onClick:i[8]||(i[8]=(...l)=>r(e).toggleExpandMapModal&&r(e).toggleExpandMapModal(...l))},"Expand Map"),a("a",{class:"navbar-item",onClick:i[9]||(i[9]=(...l)=>r(e).toggleAttributionModal&&r(e).toggleAttributionModal(...l))},"Attributions"),a("div",is,[as,a("div",rs,[a("a",{class:"navbar-item",onClick:i[10]||(i[10]=(...l)=>r(o).logHexes&&r(o).logHexes(...l))},"Log hexes"),a("a",{class:"navbar-item",onClick:i[11]||(i[11]=(...l)=>r(e).logActive&&r(e).logActive(...l))},"Log active hexes"),a("a",{class:"navbar-item",onClick:i[12]||(i[12]=(...l)=>r(o).logLeftmostColumn&&r(o).logLeftmostColumn(...l))},"Log leftmost"),a("a",{class:"navbar-item",onClick:i[13]||(i[13]=(...l)=>r(e).toggleInfoModal&&r(e).toggleInfoModal(...l))},"Info"),a("a",{class:"navbar-item",onClick:s},"Log HTML"),a("a",{class:"navbar-item",onClick:i[14]||(i[14]=(...l)=>r(e).listAllStored&&r(e).listAllStored(...l))},"List stored to console")])])]),a("div",ls,[r(e).savingIndicator?(u(),p("div",ds,us)):v("",!0),fs])]))}};var gs=V(ps,[["__scopeId","data-v-057b7450"]]);const ms={props:{items:{type:Array,required:!0},command:{type:Function,required:!0}},data(){return{selectedIndex:0}},watch:{items(){this.selectedIndex=0}},methods:{onKeyDown({event:t}){return t.key==="ArrowUp"?(this.upHandler(),!0):t.key==="ArrowDown"?(this.downHandler(),!0):t.key==="Enter"?(this.enterHandler(),!0):!1},upHandler(){this.selectedIndex=(this.selectedIndex+this.items.length-1)%this.items.length},downHandler(){this.selectedIndex=(this.selectedIndex+1)%this.items.length},enterHandler(){this.selectItem(this.selectedIndex)},selectItem(t){const e=this.items[t];e&&this.command({uuid:e.uuid})}}},bs={class:"items"},ys=["onClick"],ws={key:1,class:"item"};function vs(t,e,o,s,n,i){return u(),p("div",bs,[o.items.length?(u(!0),p(A,{key:0},S(o.items,(l,d)=>(u(),p("button",{class:b(["item",{"is-selected":d===n.selectedIndex}]),key:d,onClick:c=>i.selectItem(d)},T(l.id),11,ys))),128)):(u(),p("div",ws," No result "))])}var pe=V(ms,[["render",vs]]);j({id:"mentions",state:()=>({people:["Elder","King","Juggler"],places:["Ruin","Town","Village"]}),getters:{},actions:{}});const xs=Me.create({name:"headingH1",addAttributes(){return{id:{default:null,parseHTML:t=>t.getAttribute("id"),renderHTML:t=>t.id?{id:t.id}:{}}}},parseHTML(){return[{tag:'span[data-type="headingH1"]'}]},renderHTML({HTMLAttributes:t}){return["span",P({"data-type":"headingH1",style:"font-size:2em"},t),0]},addCommands(){return{setJumpAnchor:t=>({chain:e})=>e().extendMarkRange("headingH1").setMark("headingH1",t).run(),getJumpAnchor:()=>({commands:t})=>{if(this.editor.view.state.selection.$from.nodeAfter==null)return;let o=this.editor.view.state.selection.$from.nodeAfter.marks.find(s=>s.type&&s.type.name=="headingH1");if(o)return o.attrs.id},unsetJumpAnchor:()=>({commands:t})=>{console.log("unsetJumpAnchor not written...")}}}});var ks=F.extend({name:"hex-image",addAttributes(){return W(O({},F.config.addAttributes()),{style:{default:"width: 110px; height: 96px; padding-right: 10px"}})},renderHTML({node:t,HTMLAttributes:e}){const o=t.attrs.style;return e.style=o,["img",P(this.options.HTMLAttributes,e)]}});const ge={props:{modelValue:{type:Object,default:""},showMentionTooltip:{type:Boolean,default:!0},editable:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const o=t,s=w();s.hexByUUID;var n="mention";o.showMentionTooltip||(n="mention no-tooltip");const i=new te({editable:o.editable,extensions:[oe,se.configure({placeholder:"Fill in some info about the hex..."}),F.configure({inline:!0}),xs,ne,ks.configure({inline:!0}),be.configure({HTMLAttributes:{class:n},suggestion:{items:({query:l})=>s.hexes.flat().filter(d=>d.id.startsWith(l)).slice(0,5),render:()=>{let l,d;return{onStart:c=>{l=new ie(pe,{props:c,editor:c.editor}),d=ae("body",{getReferenceClientRect:c.clientRect,appendTo:()=>document.body,content:l.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start",theme:"light",arrow:!1})},onUpdate(c){l.updateProps(c),d[0].setProps({getReferenceClientRect:c.clientRect})},onKeyDown(c){var h;return c.event.key==="Escape"?(d[0].hide(),!0):(h=l.ref)==null?void 0:h.onKeyDown(c)},onExit(){d[0].destroy(),l.destroy()}}}}})],content:o.modelValue,onUpdate:()=>{e("update:modelValue",i.getJSON())}});return re(()=>{i.destroy()}),le(()=>o.modelValue,(l,d)=>{JSON.stringify(i.getJSON())!==JSON.stringify(l)&&i.commands.setContent(l,!1)}),(l,d)=>(u(),$(r(de),{editor:r(i)},null,8,["editor"]))}};const _s={class:"popupContent"},me={props:{hex:{type:Object}},setup(t){return(e,o)=>(u(),p("div",_s,[x(ge,{modelValue:t.hex.content,showMentionTooltip:!1},null,8,["modelValue"])]))}};const Ts=["id"],As=["id"],Ms=a("div",{id:"arrow","data-popper-arrow":""},null,-1),Cs={props:{nodeViewProps:ce,node:{type:Object,required:!0}},setup(t){const o=w().hexByUUID,s=m();var n,i,l=null,d=Ce();q(()=>{i=document.querySelector("#hex-mention-"+d),l=document.querySelector("#tooltip-hex-mention-"+d),n=he(i,l,{placement:"bottom",modifiers:[{name:"offset",options:{offset:[0,8]}}]})});function c(){l.setAttribute("data-show",""),n.update()}function h(){l.removeAttribute("data-show")}function f(g){return g=="test-class"?"hex-mention test-class":"hex-mention"}return(g,y)=>(u(),$(r(ue),{class:"custom-mention-component",as:"span"},{default:R(()=>[a("span",{class:b(f(t.node.attrs.class)),id:"hex-mention-"+r(d),onMouseenter:c,onFocus:c,onBlur:h,onMouseleave:h,onClick:y[0]||(y[0]=B=>r(s).hexClicked(r(o)(t.node.attrs.uuid),{shiftKey:!1}))},T(r(o)(t.node.attrs.uuid).id),43,Ts),a("div",{class:"tooltip",id:"tooltip-hex-mention-"+r(d),role:"tooltip"},[x(me,{hex:r(o)(t.node.attrs.uuid)},null,8,["hex"]),Ms],8,As)]),_:1}))}};const Hs={props:{nodeViewProps:ce,node:{type:Object,required:!0}},setup(t){const e=t,s=w().hexByUUID,n=m(),i=He(()=>s(e.node.attrs.uuid));return(l,d)=>(u(),$(r(ue),{class:"custom-mention-component-no-tooltip",as:"span"},{default:R(()=>[a("span",{class:"hex-mention",onMouseenter:d[0]||(d[0]=(...c)=>l.show&&l.show(...c)),onFocus:d[1]||(d[1]=(...c)=>l.show&&l.show(...c)),onBlur:d[2]||(d[2]=(...c)=>l.hide&&l.hide(...c)),onMouseleave:d[3]||(d[3]=(...c)=>l.hide&&l.hide(...c)),onClick:d[4]||(d[4]=c=>r(n).selectHex(r(i),{shiftKey:!1}))},T(r(i).id),33)]),_:1}))}},Is=new Ie("mention"),be=Se.create({name:"mention",addOptions(){return{HTMLAttributes:{},suggestion:{char:"@",pluginKey:Is,command:({editor:t,range:e,props:o})=>{var i;const s=t.view.state.selection.$to.nodeAfter;((i=s==null?void 0:s.text)==null?void 0:i.startsWith(" "))&&(e.to+=1),t.chain().focus().insertContentAt(e,[{type:this.name,attrs:o},{type:"text",text:" "}]).run()},allow:({state:t,range:e})=>{const o=t.doc.resolve(e.from),s=t.schema.nodes[this.name];return!!o.parent.type.contentMatch.matchType(s)}}}},group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes(){return{uuid:{default:null,parseHTML:t=>({uuid:t.getAttribute("data-mention-uuid")}),renderHTML:t=>t.uuid?{"data-mention-uuid":t.uuid}:{}}}},parseHTML(){return this.options.HTMLAttributes.class.includes("no-tooltip")?[{tag:"custom-mention-component-no-tooltip[data-mention-uuid]"}]:[{tag:"custom-mention-component[data-mention-uuid]"}]},renderHTML({node:t,HTMLAttributes:e}){return this.options.HTMLAttributes.class.includes("no-tooltip")?["custom-mention-component-no-tooltip",P(this.options.HTMLAttributes,e)]:["custom-mention-component",P(this.options.HTMLAttributes,e)]},addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.command(({tr:t,state:e})=>{let o=!1;const{selection:s}=e,{empty:n,anchor:i}=s;return n?(e.doc.nodesBetween(i-1,i,(l,d)=>{if(l.type.name===this.name)return o=!0,t.insertText(this.options.suggestion.char||"",d,d+l.nodeSize),!1}),o):!1})}},addProseMirrorPlugins(){return[$e(O({editor:this.editor},this.options.suggestion))]},addNodeView(){return this.options.HTMLAttributes.class.includes("no-tooltip")?X(Hs):X(Cs)}});const Ss=a("i",{class:"ri-bold"},null,-1),$s=[Ss],Ls=a("i",{class:"ri-italic"},null,-1),Bs=[Ls],Us=a("i",{class:"ri-strikethrough"},null,-1),Rs=[Us],zs=a("i",{class:"ri-link"},null,-1),Es=[zs],Ds={props:{modelValue:{type:Object,default:""},showMentionTooltip:{type:Boolean,default:!0},editable:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(t,{emit:e}){const o=t,s=w();s.hexByUUID;var n="mention";o.showMentionTooltip||(n="mention no-tooltip");const i=new te({editable:o.editable,extensions:[oe,se.configure({placeholder:"Fill in some info about the hex..."}),F.configure({inline:!0}),ne,Z,be.configure({HTMLAttributes:{class:n},suggestion:{items:({query:d})=>s.hexes.flat().filter(c=>c.id.startsWith(d)).slice(0,5),render:()=>{let d,c;return{onStart:h=>{d=new ie(pe,{props:h,editor:h.editor}),c=ae("body",{getReferenceClientRect:h.clientRect,appendTo:()=>document.body,content:d.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start",theme:"light",arrow:!1})},onUpdate(h){d.updateProps(h),c[0].setProps({getReferenceClientRect:h.clientRect})},onKeyDown(h){var f;return h.event.key==="Escape"?(c[0].hide(),!0):(f=d.ref)==null?void 0:f.onKeyDown(h)},onExit(){c[0].destroy(),d.destroy()}}}}})],content:o.modelValue,onUpdate:()=>{e("update:modelValue",i.getJSON())}});re(()=>{i.destroy()}),le(()=>o.modelValue,(d,c)=>{JSON.stringify(i.getJSON())!==JSON.stringify(d)&&i.commands.setContent(d,!1)});function l(d){const c=d.getAttributes("link").href;var h=window.prompt("URL",c);if(h.includes("http")||(h="https://"+h),h!==null){if(h===""){d.chain().focus().extendMarkRange("link").unsetLink().run();return}d.chain().focus().extendMarkRange("link").setLink({href:h}).run()}}return(d,c)=>(u(),p(A,null,[r(i)?(u(),$(r(Z),{key:0,editor:r(i),"tippy-options":{duration:100}},{default:R(()=>[a("button",{onClick:c[0]||(c[0]=h=>r(i).chain().focus().toggleBold().run()),class:b({"is-active":r(i).isActive("bold")})},$s,2),a("button",{onClick:c[1]||(c[1]=h=>r(i).chain().focus().toggleItalic().run()),class:b({"is-active":r(i).isActive("italic")})},Bs,2),a("button",{onClick:c[2]||(c[2]=h=>r(i).chain().focus().toggleStrike().run()),class:b({"is-active":r(i).isActive("strike")})},Rs,2),a("button",{onClick:c[3]||(c[3]=h=>l(this.editor)),class:b({"is-active":r(i).isActive("link")})},Es,2)]),_:1},8,["editor"])):v("",!0),x(r(de),{editor:r(i)},null,8,["editor"])],64))}};const Ps=["id"],Fs=["id"],Vs=a("div",{id:"arrow","data-popper-arrow":""},null,-1),Os={props:{hex:{type:Object}},setup(t){const e=t,o=m();var s,n,i=null;q(()=>{n=document.querySelector("#hex-tag-"+e.hex.id),i=document.querySelector("#tooltip-hex-tag-"+c(e.hex.uuid)),s=he(n,i,{modifiers:[{name:"offset",options:{offset:[0,8]}}]})});function l(){i.setAttribute("data-show",""),s.update()}function d(){i.removeAttribute("data-show")}function c(h){for(var f="ABCDEFGHIJKLMNOPQRSTUVWXYZ",g="";h>26;)g=g+"Z",h=h-26;return g=g+f.charAt(h-1),g}return(h,f)=>(u(),p(A,null,[a("span",{id:"hex-tag-"+t.hex.id,class:"tag is-medium mentioningTag",onMouseenter:l,onFocus:l,onBlur:d,onMouseleave:d,onClick:f[0]||(f[0]=g=>r(o).selectHex(t.hex,{shiftKey:!1}))},T(t.hex.id),41,Ps),a("div",{class:"tooltip",id:"tooltip-hex-tag-"+c(t.hex.uuid),role:"tooltip"},[x(me,{hex:t.hex},null,8,["hex"]),Vs],8,Fs)],64))}};const Ns={class:"sidebar-main"},js={class:"card"},qs={class:"card-header has-background-grey-lighter"},Gs={class:"sidebar-header"},Ks={class:"media-left"},Js={class:"image sidebar-hex-image"},Qs={class:"modal-card-title"},Ws={class:"card-content"},Xs=a("i",{class:"fi fi-bs-refresh icon-button"},null,-1),Zs=a("i",{class:"fi fi-bs-document icon-button"},null,-1),Ys=[Xs,Zs],en=a("i",{class:"fi fi-bs-refresh icon-button"},null,-1),tn=a("i",{class:"fi fi-bs-document icon-button"},null,-1),on=a("i",{class:"fi fi-bs-marker icon-button"},null,-1),sn=[en,tn,on],nn=a("i",{class:"fi fi-bs-refresh icon-button"},null,-1),an=a("i",{class:"fi fi-bs-navigation icon-button"},null,-1),rn=[nn,an],ln={key:0,class:"block"},dn={class:"card"},cn=a("div",{class:"level header-div"},[a("i",{class:"fi fi-bs-comment section-icon"}),a("p",{class:"card-header-title"},"Mentioned By")],-1),hn=[cn],un={key:0,class:"card-content"},fn={class:"tags"},pn={key:1,class:"block"},gn={class:"card"},mn={class:"level header-div"},bn=a("p",{class:"card-header-title"},"Description",-1),yn={key:0,class:"fi fi-bs-angle-left"},wn={key:1,class:"fi fi-bs-angle-down"},vn={key:0,class:"card-content"},xn={key:2,class:"block"},kn={class:"card"},_n={class:"level header-div"},Tn=a("p",{class:"card-header-title"},"Content Types",-1),An={key:0,class:"fi fi-bs-angle-left"},Mn={key:1,class:"fi fi-bs-angle-down"},Cn={key:0,class:"card-content"},Hn={class:"block"},In={class:"card"},Sn={class:"level header-div"},$n=a("p",{class:"card-header-title"},"Terrain",-1),Ln={key:0,class:"fi fi-bs-angle-left"},Bn={key:1,class:"fi fi-bs-angle-down"},Un={key:0,class:"card-content"},Rn={class:"columns is-multiline"},zn=["onClick","title"],En={class:"block"},Dn={class:"card"},Pn={class:"card-header has-background-grey-lighter"},Fn={class:"level header-div"},Vn=a("i",{class:"fi fi-bs-home section-icon"},null,-1),On=a("p",{class:"card-header-title"},"Icon",-1),Nn={key:0,class:"fi fi-bs-angle-left"},jn={key:1,class:"fi fi-bs-angle-down"},qn={key:0,class:"card-content"},Gn={class:"columns is-multiline"},Kn=["onClick","title"],Jn={setup(t){const e=m(),o=w();o.activeHex;const s=o.hexByUUID;return(n,i)=>(u(),p("div",Ns,[a("div",js,[a("header",qs,[a("div",Gs,[a("div",Ks,[a("figure",Js,[a("img",Le(Be({src:r(e).activeHexImage})),null,16)])]),a("p",Qs,T(r(e).title),1)])]),a("div",Ws,[a("button",{class:b(["button rerandomize-button",r(e).descriptionToBeRandomized&&!r(e).tagsToBeRandomized?"is-info":"is-primary"]),title:"Generate description with current content types - generates content types if none present",onClick:i[0]||(i[0]=l=>r(o).rerandomizeHexes("description")),onMouseenter:i[1]||(i[1]=l=>r(e).setRandomizeIndicator(["description"])),onFocus:i[2]||(i[2]=l=>r(e).setRandomizeIndicator(["description"])),onMouseleave:i[3]||(i[3]=l=>r(e).removeRandomizeIndicator(["description"])),onBlur:i[4]||(i[4]=l=>r(e).removeRandomizeIndicator(["description"]))},Ys,34),a("button",{class:b(["button rerandomize-button",r(e).descriptionToBeRandomized&&r(e).tagsToBeRandomized?"is-info":"is-primary"]),title:"Generate content types and description",onClick:i[5]||(i[5]=l=>r(o).rerandomizeHexes("tags+description")),onMouseenter:i[6]||(i[6]=l=>r(e).setRandomizeIndicator(["description","tags"])),onFocus:i[7]||(i[7]=l=>r(e).setRandomizeIndicator(["description","tags"])),onMouseleave:i[8]||(i[8]=l=>r(e).removeRandomizeIndicator(["description","tags"])),onBlur:i[9]||(i[9]=l=>r(e).removeRandomizeIndicator(["description","tags"]))},sn,34),a("button",{class:b(["button rerandomize-button",r(e).terrainToBeRandomized?"is-info":"is-primary"]),title:"Generate terrain",onClick:i[10]||(i[10]=l=>r(o).rerandomizeHexes("terrain")),onMouseenter:i[11]||(i[11]=l=>r(e).setRandomizeIndicator(["terrain"])),onFocus:i[12]||(i[12]=l=>r(e).setRandomizeIndicator(["terrain"])),onMouseleave:i[13]||(i[13]=l=>r(e).removeRandomizeIndicator(["terrain"])),onBlur:i[14]||(i[14]=l=>r(e).removeRandomizeIndicator(["terrain"]))},rn,34),r(e).selectedHexCount==1?(u(),p("div",ln,[a("div",dn,[a("header",{class:"card-header has-background-grey-lighter",onClick:i[15]||(i[15]=l=>r(e).toggleSection("mentioned-by"))},hn),r(e).mentionedBySectionVisible?(u(),p("div",un,[a("div",fn,[(u(!0),p(A,null,S(r(e).mentioningHexes,l=>(u(),$(Os,{hex:l},null,8,["hex"]))),256))])])):v("",!0)])])):v("",!0),r(e).selectedHexCount==1?(u(),p("div",pn,[a("div",gn,[a("header",{class:b(["card-header",[{"has-background-grey-lighter":!r(e).descriptionToBeRandomized},{"has-background-info":r(e).descriptionToBeRandomized}]])},[a("div",mn,[a("i",{class:b(["fi fi-bs-document section-icon",{highlighted:r(e).descriptionToBeRandomized}])},null,2),bn,a("span",{class:"icon details",title:"Collapse section",onClick:i[16]||(i[16]=l=>r(e).toggleSection("text"))},[r(e).textSectionVisible?v("",!0):(u(),p("i",yn)),r(e).textSectionVisible?(u(),p("i",wn)):v("",!0)])])],2),r(e).textSectionVisible?(u(),p("div",vn,[x(Ds,{modelValue:r(s)(r(e).activeHexes[0]).content,"onUpdate:modelValue":i[17]||(i[17]=l=>r(s)(r(e).activeHexes[0]).content=l),editable:r(e).activeHexes.length==1},null,8,["modelValue","editable"])])):v("",!0)])])):v("",!0),r(e).selectedHexCount==1?(u(),p("div",xn,[a("div",kn,[a("header",{class:b(["card-header",[{"has-background-grey-lighter":!r(e).tagsToBeRandomized},{"has-background-info":r(e).tagsToBeRandomized}]])},[a("div",_n,[a("i",{class:b(["fi fi-bs-marker section-icon",{highlighted:r(e).tagsToBeRandomized}])},null,2),Tn,a("span",{class:"icon details",onClick:i[18]||(i[18]=l=>r(e).toggleSection("tags"))},[r(e).tagsSectionVisible?v("",!0):(u(),p("i",An)),r(e).tagsSectionVisible?(u(),p("i",Mn)):v("",!0)])])],2),r(e).tagsSectionVisible?(u(),p("div",Cn,[x(r(G),{modelValue:r(s)(r(e).activeHexes[0]).tags,"onUpdate:modelValue":i[19]||(i[19]=l=>r(s)(r(e).activeHexes[0]).tags=l),mode:"tags","close-on-select":!1,searchable:!0,"create-option":!1,placeholder:"Select location tags...",options:r(o).tagList},null,8,["modelValue","options"])])):v("",!0)])])):v("",!0),a("div",Hn,[a("div",In,[a("header",{class:b(["card-header",[{"has-background-grey-lighter":!r(e).terrainToBeRandomized},{"has-background-info":r(e).terrainToBeRandomized}]])},[a("div",Sn,[a("i",{class:b(["fi fi-bs-navigation section-icon",{highlighted:r(e).terrainToBeRandomized}])},null,2),$n,a("span",{class:"icon details",onClick:i[20]||(i[20]=l=>r(e).toggleSection("terrain"))},[r(e).terrainSectionVisible?v("",!0):(u(),p("i",Ln)),r(e).terrainSectionVisible?(u(),p("i",Bn)):v("",!0)])])],2),r(e).terrainSectionVisible&&r(e).showTerrainsAsPanel?(u(),p("div",Un,[a("div",Rn,[(u(!0),p(A,null,S(r(e).terrainToImage,(l,d)=>(u(),p("div",{class:b(["box",{"has-background-grey-lighter":l.selected}]),onClick:c=>r(e).selectTerrain(d),title:d},[a("img",U({class:"terrain-picker-hex"},{src:l.file}),null,16)],10,zn))),256))])])):v("",!0)])]),a("div",En,[a("div",Dn,[a("header",Pn,[a("div",Fn,[Vn,On,a("span",{class:"icon details",onClick:i[21]||(i[21]=l=>r(e).toggleSection("icons"))},[r(e).iconsSectionVisible?v("",!0):(u(),p("i",Nn)),r(e).iconsSectionVisible?(u(),p("i",jn)):v("",!0)])])]),r(e).iconsSectionVisible?(u(),p("div",qn,[a("div",Gn,[(u(!0),p(A,null,S(r(e).iconProperties,(l,d)=>(u(),p("div",{class:b(["box icon-picker-container",{"has-background-grey-lighter":l.selected}]),onClick:c=>r(e).selectIcon(d),title:d},[a("img",U({class:"icon-picker"},{src:l.file}),null,16)],10,Kn))),256))])])):v("",!0)])])])])]))}};const Qn={class:"sidebar-main"},Wn={class:"card"},Xn={class:"block"},Zn={class:"card"},Yn=a("header",{class:"card-header has-background-primary"},[a("div",{class:"level header-div"},[a("i",{class:"fi fi-bs-navigation section-icon"}),a("p",{class:"card-header-title"},"Terrain Painter")])],-1),ei={class:"card-content"},ti={class:"columns is-multiline"},oi=["onClick","title"],si={setup(t){const e=m(),o=w();return o.activeHex,o.hexByUUID,(s,n)=>(u(),p("div",Qn,[a("div",Wn,[a("div",Xn,[a("div",Zn,[Yn,a("div",ei,[a("div",ti,[(u(!0),p(A,null,S(r(e).paintTerrainProperties,(i,l)=>(u(),p("div",{class:b(["box",{"has-background-primary":i.selected}]),onClick:d=>r(e).selectPaintTerrain(l),title:l},[a("img",U({class:"terrain-picker-hex"},{src:i.file}),null,16)],10,oi))),256))])])])])])]))}};var ni="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXwAAAFJAgMAAADlPn5HAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAlQTFRFAAAAABL/ABL/ErC0jQAAAAN0Uk5TALj/+2gP4wAAA3NJREFUeJzV3cFx6zAMRdFkkyJSjetBNSkiG6nKjOPx2JZJCQBxNXwp4G7+Sb4tkcDHR/vne439/HY6vR8L9pe5+p/B/Lpepup/hfs/U/WjPKNALdyPAYL7cT4xQHQ/zicGiO7HecaAWqIfAQT3M3wigOh+hk8EEN3P8IwAtVTfDwju5/j4AdH9HB8/oBwfPyC6b8m+FxDcz/LxAqL7WZ5eoFk+XkB039J9HyC4n+fjA0T38zx9QPN8fIDovg30PYDg/ggfD6ARPh5AdH+EjwcQ3beh/jEguD/G8xjoGJ9jQHR/jM8xILpvg/0jQHB/lOcR0FE+R4Do/iifI0B034b7+4Dg/jjPfaDjfPYB0f1xPvuA6L4V9HcAVfDZA0T3K/jsAaL7FXz2ANF9K+l3gdbw6QOi+zV8+oDofg2fPiC6b0X9DtAqPj1AdL+KTw8Q3a/i0wNkZf02ILhfx6cNiO7X8WkDovt1PNtArbDfAgT3K/m0ANH9Sj4tQHS/kmcLqJX23wHB/Vo+74Dofi2fd0B0v5bnO1Ar7m8Bwf1qPltAdL+azxZQNZ8tILpv5f3lzH49n1dAdL+e5yvQej6vgOi+Af3lvD7B5xkQ3Sd4PgMl+DwDovuG9Jez+gyfByCGzwMQ3Wf4PADRfYP6yzl9iucdKMXnDojuU3zugOi+Yf2F5YP3/4FyfG6A6D7H5waI7hvYX/g+yfMKlORzBUT3ST5XQHTf0P6C99H8usr3Dc3z/77qv1/af98u+N9/9f8f5T+fqH8+pD8/098v8L769zv179f08wf15zPyz8fUn0/Sz2/Vn2/Lv1+g37/Qffr9lPr7Qfn3s/T7a/X3++rnK+TPt9Dnf9TPR6mfT8PP71X3zz7fqH6+VP18L37+me7T58PVz+er34/A74+o369Rv9+kfr8Mv3+nfj9R/X4ofX9W/n6x+v1u9fv19PwB+fkM6vMx1OeT0PNb5OfbqM8Xoucvqc+nkp8Ppj6fjZ5fR/fx+YHq8xXV51vS8z/V56PKz6dVnw9Mz09Wny8tP9+bnn9O9+n58AOAppjPL78fIQ/Itz9Cfb9GGtAk+03k98tkgXr376jvJ0oCmmY/FL4/Kwdonv1i6vvdUoAi+/Xo/YB0PwNopv2M6vsxE0Cn2k+K72+NA5prv636fuEwoMn2O5ftv/4DzPlQKE78E/sAAAAASUVORK5CYII=";const ii={class:"image-row flat-row",draggable:"false"},ai=["uuid","onClick","onMousedown","onMouseenter"],ri={class:"hex-label",draggable:"false"},li={setup(t){fe(g=>({"2b2bed74":c(n(60)),"3648a7bd":c(n(-5.25)),"2b29062e":c(n(96)),"629138c4":c(n(110)),"1285d896":c(n(57.5)),"625a3f5f":c(n(-42)),a06fc464:c(l()),dc87148c:f(),"36374f6f":c(d())}));const e=m(),o=w(),{pressed:s}=Ue();function n(g){return g*e.hexScale}function i(){return o.getShiftValue}function l(){return o.getShiftValue*e.hexScale}function d(){return h()*e.hexScale}function c(g){return g+"px"}function h(){return i()==83.5?0:60}function f(){return e.showHexLabels?"visible":"hidden"}return o.hexByUUID,(g,y)=>(u(),p("div",{id:"hex-container",class:"hex-container",style:N({cursor:r(e).currentTool=="hex-editor"?"auto":"url(./misc-images/paint-roller-24.png), auto"})},[(u(!0),p(A,null,S(r(o).hexes,B=>(u(),p("div",ii,[(u(!0),p(A,null,S(B,k=>(u(),p("div",{class:b(["image-hex flat-hex",{"hex-selected":r(e).activeHexes.includes(k.uuid),"hex-mentioned":r(e).mentioningHexes.includes(k.uuid)}]),key:k.uuid,uuid:k.uuid,onClick:C=>r(e).hexClicked(k,C),onMousedown:C=>r(e).currentTool=="terrain-painter"?r(e).hexClicked(k,C):null,onMouseenter:C=>r(s)?r(e).hexClicked(k,C):null,draggable:"false"},[a("img",U({class:"hex-terrain"},{src:r(e).terrainToImage[k.terrain].file},{draggable:"false"}),null,16),k.icon!=null?(u(),p("img",U({key:0,class:"hex-icon"},{src:r(e).iconProperties[k.icon].file},{draggable:"false"}),null,16)):v("",!0),a("img",{class:b(["hex-overlay-mentioning",{"mentioning-overlay-active":r(e).mentioningHexes.find(C=>C.uuid==k.uuid)!=null}]),src:ni,draggable:"false"},null,2),a("div",ri,T(k.id),1)],42,ai))),128))]))),256))],4))}};var di=V(li,[["__scopeId","data-v-472cbf15"]]);const ci={class:"columns is-gapless"},hi={class:"column is-one-quarter has-background-white"},ui={class:"column scroll-column"},fi={setup(t){const e=m();return(o,s)=>(u(),p("div",ci,[a("div",hi,[r(e).currentTool=="hex-editor"?(u(),$(Jn,{key:0})):v("",!0),r(e).currentTool=="terrain-painter"?(u(),$(si,{key:1})):v("",!0)]),a("div",ui,[x(di)])]))}};const pi={id:"hex-container-view",class:"hex-container-view"},gi={class:"image-row flat-row"},mi=["uuid","onClick"],bi={setup(t){fe(h=>({"9fc70066":d(s(60)),"7137cfd6":d(s(-5.25)),"9fc41920":d(s(96)),"532d931d":d(s(110)),"19ac047c":d(s(57.5)),"52f699b8":d(s(-42)),"5a840e56":d(i()),"3e2d4e88":d(l())}));const e=m(),o=w();function s(h){return h*e.hexScale}function n(){return o.getShiftValue}function i(){return o.getShiftValue*e.hexScale}function l(){return c()*e.hexScale}function d(h){return h+"px"}function c(){return n()==83.5?0:60}return o.hexByUUID,(h,f)=>(u(),p("div",pi,[(u(!0),p(A,null,S(r(o).hexes,g=>(u(),p("div",gi,[(u(!0),p(A,null,S(g,y=>(u(),p("div",{class:"image-hex flat-hex",key:y.uuid,uuid:y.uuid,style:N({visibility:y.terrain=="Default"?"hidden":"visible"}),onClick:B=>r(e).hexClicked(y,{shiftKey:!1})},[a("img",U({class:"hex-terrain"},{src:r(e).terrainToImage[y.terrain].file}),null,16),y.icon!=null?(u(),p("img",U({key:0,class:"hex-icon"},{src:r(e).iconProperties[y.icon].file}),null,16)):v("",!0),a("div",{class:"hex-label",style:N({visibility:y.terrain=="Default"||!r(e).showHexLabels?"hidden":"visible"})},T(y.id),5)],12,mi))),128))]))),256))]))}};var yi=V(bi,[["__scopeId","data-v-4ac131fb"]]);const wi={id:"hexDetailReader",class:"hexDetailReader"},vi={setup(t){m();const e=w();return e.activeHex,e.hexByUUID,(o,s)=>(u(),p("div",wi,[x(ge,{modelValue:r(e).unifyContents,"onUpdate:modelValue":s[0]||(s[0]=n=>r(e).unifyContents=n),editable:!1},null,8,["modelValue"])]))}},xi={setup(t){return(e,o)=>(u(),p(A,null,[x(yi),x(vi)],64))}};const ki=a("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css"},null,-1),_i={setup(t){const e=m(),o=w();Y();const{ctrl_s:s}=Y({passive:!1,onEventFired(i){i.ctrlKey&&i.key==="s"&&i.type==="keydown"&&i.preventDefault()}});Re(s,()=>e.saveMapLocally()),ee(document,"mouseup",i=>{e.mode=="edit"&&e.currentTool=="terrain-painter"&&o.terrainPainterMapUpdate()});function n(){return window.confirm("Do you really want to leave the page?  Any unsaved changes will be lost.")}return ee(window,"beforeunload",i=>{n()||i.preventDefault(),i.returnValue=""}),(i,l)=>(u(),p(A,null,[ki,x(ct),x(Et),r(e).showLoadModal?(u(),$(qt,{key:0})):v("",!0),x(Yt),x(co),x(Ho),x(No),x(Eo),x(gs),r(e).mode=="edit"?(u(),$(fi,{key:1})):v("",!0),r(e).mode=="view"?(u(),$(xi,{key:2})):v("",!0)],64))}},K=ze(_i);K.use(Ee());K.config.unwrapInjectedRef=!0;K.mount("#app");
